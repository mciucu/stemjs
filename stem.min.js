!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?e(exports):"function"==typeof define&&define.amd?define(["exports"],e):e(t.stem=t.stem||{})}(this,function(t){"use strict";function e(t){if(!t)return[];if(!Array.isArray(t))return[t];for(var i=!0,n=0;n<t.length;n++)if(Array.isArray(t[n])||!t[n]){i=!1;break}if(i)return t;for(var o=[],r=0;r<t.length;r++)if(Array.isArray(t[r]))for(var s=e(t[r]),a=0;a<s.length;a+=1)o.push(s[a]);else null!=t[r]&&o.push(t[r]);return o}function i(t,e){for(var i=[];t.length>0;)i.push(t.splice(0,e));return i}function n(t){return null!=t&&void 0!==t[Symbol.iterator]}function o(t,e){return null==t&&null==e?0:null==e?1:null==t?-1:"number"==typeof t&&"number"==typeof e?t-e:t.toString()===e.toString()?0:t.toString()<e.toString()?-1:1}function r(t,e){var i=new Map(t),n=!0,o=!1,r=void 0;try{for(var s,a=(e||[])[Symbol.iterator]();!(n=(s=a.next()).done);n=!0){var l=s.value;l&&(Array.isArray(l)||(l=[l]),l.length<2&&l.push({}),i.set(l[0],l[1]))}}catch(t){o=!0,r=t}finally{try{!n&&a.return&&a.return()}finally{if(o)throw r}}var u=!0,h=!1,c=void 0;try{for(var p,d=i[Symbol.iterator]();!(u=(p=d.next()).done);u=!0){var f=O(p.value,2),y=f[0],v=f[1];v||(v={}),v.domName||(v.domName=y),i.set(y,v)}}catch(t){h=!0,c=t}finally{try{!u&&d.return&&d.return()}finally{if(h)throw c}}return i}function s(t,e){var i={};return i[t]=e,i}function a(t){return s(":hover",t)}function l(t){return s(":active",t)}function u(t){return s(":focus",t)}function h(t){arguments.length>1&&(t=Object.assign.apply(Object,[{}].concat(Array.prototype.slice.call(arguments))));var e=V.get(t);return e||(e=D.DynamicStyleElement.create(document.body,{style:t}),V.set(t,e)),e}function c(t,e){var i=!0,n=!1,o=void 0;try{for(var r,s=e[Symbol.iterator]();!(i=(r=s.next()).done);i=!0){var a=r.value;if("function"==typeof t[a])return t[a](),a}}catch(t){n=!0,o=t}finally{try{!i&&s.return&&s.return()}finally{if(n)throw o}}return null}function p(t,e){var i=function(t){function i(){return v(this,i),_(this,(i.__proto__||Object.getPrototypeOf(i)).apply(this,arguments))}return k(i,t),g(i,[{key:"setOptions",value:function(t){b(i.prototype.__proto__||Object.getPrototypeOf(i.prototype),"setOptions",this).call(this,t),this.options.level=this.options.level||D.Level.DEFAULT}},{key:"getDOMAttributes",value:function(){var t=b(i.prototype.__proto__||Object.getPrototypeOf(i.prototype),"getDOMAttributes",this).call(this);return t.addClass(this.constructor.bootstrapClass()),this.getLevel()&&t.addClass(this.constructor.bootstrapClass()+"-"+this.getLevel()),t}},{key:"getLevel",value:function(){return this.options.level||""}},{key:"setLevel",value:function(t){this.options.level=t,this.applyDOMAttributes()}}],[{key:"bootstrapClass",value:function(){return e}}]),i}(t);return i}function d(t){return function(t){function n(){return v(this,n),_(this,(n.__proto__||Object.getPrototypeOf(n)).apply(this,arguments))}return k(n,t),g(n,[{key:"fetch",value:function(t,e,i){var n=this,o=arguments.length>3&&void 0!==arguments[3]&&arguments[3];if(!o){var r=this.get(t);if(r)return void e(r)}this.fetchJobs||(this.fetchJobs=[]),this.fetchJobs.push({id:t,success:e,error:i}),this.fetchTimeout||(this.fetchTimeout=setTimeout(function(){n.executeAjaxFetch()},this.options.fetchTimeoutDuration||0))}},{key:"getFetchRequestData",value:function(t,e){return{ids:t}}},{key:"getFetchRequestObject",value:function(t,e){var i=this,n=this.getFetchRequestData(t,e);return{url:this.options.fetchURL,type:this.options.fetchType||"GET",dataType:"json",data:n,cache:!1,success:function(t){if(t.error){console.error("Failed to fetch objects of type ",i.objectType,":\n",t.error);var n=!0,o=!1,r=void 0;try{for(var s,a=e[Symbol.iterator]();!(n=(s=a.next()).done);n=!0){var l=s.value;l.error&&l.error(t.error)}}catch(t){o=!0,r=t}finally{try{!n&&a.return&&a.return()}finally{if(o)throw r}}}else{GlobalState.importState(t.state||{});var u=!0,h=!1,c=void 0;try{for(var p,d=e[Symbol.iterator]();!(u=(p=d.next()).done);u=!0){var f=p.value,y=i.get(f.id);y?f.success(y):(console.error("Failed to fetch object ",f.id," of type ",i.objectType),f.error&&f.error())}}catch(t){h=!0,c=t}finally{try{!u&&d.return&&d.return()}finally{if(h)throw c}}}},error:function(t,i,n){console.error("Error in fetching objects:\n"+t.status+":\n"+t.responseText);var o=!0,r=!1,s=void 0;try{for(var a,l=e[Symbol.iterator]();!(o=(a=l.next()).done);o=!0){var u=a.value;u.error&&u.error("Network error")}}catch(t){r=!0,s=t}finally{try{!o&&l.return&&l.return()}finally{if(r)throw s}}}}}},{key:"getFetchRequests",value:function(t){var n=new Map,o=!0,r=!1,s=void 0;try{for(var a,l=t[Symbol.iterator]();!(o=(a=l.next()).done);o=!0){var u=a.value,h=u.id;n.has(h)||n.set(h,new Array),n.get(h).push(u)}}catch(t){r=!0,s=t}finally{try{!o&&l.return&&l.return()}finally{if(r)throw s}}for(var c=this.options.maxFetchObjectCount||256,p=i(Array.from(n.keys()),c),d=i(Array.from(n.values()),c),f=[],y=0;y<p.length;y+=1)f.push(this.getFetchRequestObject(p[y],e(d[y])));return f}},{key:"executeAjaxFetch",value:function(){var t=this.fetchJobs;this.fetchJobs=null;var e=this.getFetchRequests(t),i=!0,n=!1,o=void 0;try{for(var r,s=e[Symbol.iterator]();!(i=(r=s.next()).done);i=!0){var a=r.value;rt.request(a)}}catch(t){n=!0,o=t}finally{try{!i&&s.return&&s.return()}finally{if(n)throw o}}clearTimeout(this.fetchTimeout),this.fetchTimeout=null}}]),n}(t)}function f(t){return function(t){function e(){return v(this,e),_(this,(e.__proto__||Object.getPrototypeOf(e)).apply(this,arguments))}return k(e,t),g(e,[{key:"hasTemporaryId",value:function(){return("string"==typeof this.id||this.id instanceof String)&&this.id.startsWith("temp-")}},{key:"updateId",value:function(t){if(this.id!=t){var e=this.id;this.id.startsWith("temp-")||console.error("This is only meant to replace temporary ids!"),this.id=t,this.dispatch("updateId",{oldId:e})}}}]),e}(t)}function y(t){return function(t){function e(){return v(this,e),_(this,(e.__proto__||Object.getPrototypeOf(e)).apply(this,arguments))}return k(e,t),g(e,[{key:"generateVirtualId",value:function(){return this.constructor.generateVirtualId()}},{key:"getVirtualObject",value:function(t){return this.objects.get("temp-"+t.virtualId)}},{key:"get",value:function(t){return this.objects.get(t)}},{key:"applyUpdateObjectId",value:function(t,e){var i=t.id;t.updateId(e.objectId),this.objects.delete(i),this.objects.set(t.id,t),this.dispatch("updateObjectId",t,i)}},{key:"applyCreateEvent",value:function(t){!(arguments.length>1&&void 0!==arguments[1])||arguments[1];if(t.virtualId){var i=this.getVirtualObject(t);i&&this.applyUpdateObjectId(i,t)}return b(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"applyCreateEvent",this).apply(this,arguments)}}],[{key:"generateVirtualId",value:function(){return this.virtualIdCounter||(this.virtualIdCounter=0),this.virtualIdCounter+=1,this.virtualIdCounter}}]),e}(t)}var v=(function(){function t(t){this.value=t}function e(e){function i(t,e){return new Promise(function(i,o){var a={key:t,arg:e,resolve:i,reject:o,next:null};s?s=s.next=a:(r=s=a,n(t,e))})}function n(i,r){try{var s=e[i](r),a=s.value;a instanceof t?Promise.resolve(a.value).then(function(t){n("next",t)},function(t){n("throw",t)}):o(s.done?"return":"normal",s.value)}catch(t){o("throw",t)}}function o(t,e){switch(t){case"return":r.resolve({value:e,done:!0});break;case"throw":r.reject(e);break;default:r.resolve({value:e,done:!1})}r=r.next,r?n(r.key,r.arg):s=null}var r,s;this._invoke=i,"function"!=typeof e.return&&(this.return=void 0)}return"function"==typeof Symbol&&Symbol.asyncIterator&&(e.prototype[Symbol.asyncIterator]=function(){return this}),e.prototype.next=function(t){return this._invoke("next",t)},e.prototype.throw=function(t){return this._invoke("throw",t)},e.prototype.return=function(t){return this._invoke("return",t)},{wrap:function(t){return function(){return new e(t.apply(this,arguments))}},await:function(e){return new t(e)}}}(),function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}),g=function(){function t(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,i,n){return i&&t(e.prototype,i),n&&t(e,n),e}}(),m=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var i=arguments[e];for(var n in i)Object.prototype.hasOwnProperty.call(i,n)&&(t[n]=i[n])}return t},b=function t(e,i,n){null===e&&(e=Function.prototype);var o=Object.getOwnPropertyDescriptor(e,i);if(void 0===o){var r=Object.getPrototypeOf(e);return null===r?void 0:t(r,i,n)}if("value"in o)return o.value;var s=o.get;if(void 0!==s)return s.call(n)},k=function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)},_=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e},O=function(){function t(t,e){var i=[],n=!0,o=!1,r=void 0;try{for(var s,a=t[Symbol.iterator]();!(n=(s=a.next()).done)&&(i.push(s.value),!e||i.length!==e);n=!0);}catch(t){o=!0,r=t}finally{try{!n&&a.return&&a.return()}finally{if(o)throw r}}return i}return function(e,i){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return t(e,i);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),T=function(t){if(Array.isArray(t)){for(var e=0,i=Array(t.length);e<t.length;e++)i[e]=t[e];return i}return Array.from(t)},S=function(){function t(e,i){v(this,t),this.dispatcher=e,this.callback=i}return g(t,[{key:"remove",value:function(){this.dispatcher.removeListener(this.callback)}},{key:"cleanup",value:function(){this.remove()}}]),t}(),w=function(){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};v(this,t),this.options=e,this.listeners=[]}return g(t,[{key:"addListener",value:function(t){if("function"!=typeof t)return void console.error("The listener needs to be a function: ",t);for(var e=0;e<this.listeners.length;e+=1)if(this.listeners[e]===t)return console.error("Can't re-register for the same callback: ",this," ",t),new S(this,this.listeners[e]);return this.listeners.push(t),new S(this,t)}},{key:"removeListener",value:function(t){for(var e=0;e<this.listeners.length;e+=1)if(this.listeners[e]===t)return this.listeners.splice(e,1)[0]}},{key:"dispatch",value:function(t){for(var e=0;e<this.listeners.length;e+=1){var i=this.listeners[e];i.apply(void 0,arguments)}}}]),t}(),C=function(){function t(){v(this,t)}return g(t,[{key:"getDispatcher",value:function(t){return this.dispatchers.get(t)}},{key:"dispatch",value:function(t,e){var i=this.getDispatcher(t);if(i)if(arguments.length<=2)i.dispatch(e);else{var n=Array.prototype.slice.call(arguments,1);i.dispatch.apply(i,T(n))}}},{key:"addListener",value:function(t,e){var i=this;if(Array.isArray(t))return new A(t.map(function(t){return i.addListener(t,e)}));var n=this.getDispatcher(t);return n||(n=new w,this.dispatchers.set(t,n)),n.addListener(e)}},{key:"removeListener",value:function(t,e){var i=this.getDispatcher(t);i&&i.removeListener(e)}},{key:"cleanup",value:function(){delete this._dispatchers}},{key:"dispatchers",get:function(){return this.hasOwnProperty("_dispatchers")||(this._dispatchers=new Map),this._dispatchers}}]),t}();w.Global=new C;var E=function(){function t(){v(this,t)}return g(t,[{key:"run",value:function(t){var e=this,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;this.timeout||(this.timeout=setTimeout(function(){t(),e.timeout=null},i))}}]),t}(),A=function(){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];v(this,t),this.jobs=e}return g(t,[{key:"add",value:function(t){this.jobs.push(t)}},{key:"cleanup",value:function(){var t=!0,e=!1,i=void 0;try{for(var n,o=this.jobs[Symbol.iterator]();!(t=(n=o.next()).done);t=!0){var r=n.value;r.cleanup()}}catch(t){e=!0,i=t}finally{try{!t&&o.return&&o.return()}finally{if(e)throw i}}this.jobs=[]}},{key:"remove",value:function(){this.cleanup()}}]),t}(),P=function(t){return function(t){function e(){return v(this,e),_(this,(e.__proto__||Object.getPrototypeOf(e)).apply(this,arguments))}return k(e,t),g(e,[{key:"addCleanupTask",value:function(t){this.hasOwnProperty("_cleanupJobs")||(this._cleanupJobs=new A),this._cleanupJobs.add(t)}},{key:"cleanup",value:function(){this._cleanupJobs&&this._cleanupJobs.cleanup()}}]),e}(t)},x=function(t){function e(t,i){v(this,e);var n=_(this,(e.__proto__||Object.getPrototypeOf(e)).call(this));return n.node=t,n.options=i||{},n}return k(e,t),g(e,[{key:"insertChildNodeBefore",value:function(t,e){this.node.insertBefore(t.node,e)}},{key:"clearNode",value:function(){for(;this.node&&this.node.lastChild;)this.node.removeChild(this.node.lastChild)}},{key:"uniqueId",value:function(){return this.hasOwnProperty("uniqueIdStr")||(this.constructor.hasOwnProperty("objectCount")||(this.constructor.objectCount=0),this.constructor.objectCount+=1,this.uniqueIdStr=this.constructor.objectCount+"-"+Math.random().toString(36).substr(2)),this.uniqueIdStr}},{key:"getOffset",value:function(){var t=this.node;if(!t)return{left:0,top:0};for(var e=t.style?t.style.position:null,i=0,n=0;t;){var o=t.style||{};if("absolute"===e&&"relative"===o.position)return{left:i,top:n};i+=t.offsetLeft,n+=t.offsetTop,t=t.offsetParent}return{left:i,top:n}}},{key:"getStyle",value:function(t){return window.getComputedStyle(this.node,null).getPropertyValue(t)}},{key:"isInDOM",value:function(){return document.body.contains(this.node)}},{key:"getWidthOrHeight",value:function(t){var e=this.node;if(!e)return 0;var i=parseFloat("width"===t?e.offsetWidth:e.offsetHeight);if(null==i&&(i=parseFloat(this.getStyle(t))),isNaN(i)&&(i=0),"border-box"===this.getStyle("box-sizing"))for(var n=["padding-","border-"],o={width:["left","right"],height:["top","bottom"]},r=0;r<2;r+=1)for(var s=0;s<2;s+=1)i-=parseFloat(this.getStyle(n[r]+o[t][s]));return i}},{key:"getHeight",value:function(){return this.getWidthOrHeight("height")}},{key:"getWidth",value:function(){return this.getWidthOrHeight("width")}},{key:"setHeight",value:function(t){"number"==typeof t&&(t+="px"),this.setStyle("height",t),this.dispatch("resize")}},{key:"setWidth",value:function(t){"number"==typeof t&&(t+="px"),this.setStyle("width",t),this.dispatch("resize")}},{key:"addDOMListener",value:function(t,e){this.node.addEventListener(t,e)}},{key:"removeDOMListener",value:function(t,e){this.node.removeEventListener(t,e)}},{key:"addClickListener",value:function(t){this.addDOMListener("click",t)}},{key:"setClickListener",value:function(t){this.addClickListener(t)}},{key:"removeClickListener",value:function(t){this.removeDOMListener("click",t)}},{key:"addDoubleClickListener",value:function(t){this.addDOMListener("dblclick",t)}},{key:"removeDoubleClickListener",value:function(t){this.removeDOMListener("dblclick",t)}},{key:"onChange",value:function(t){this.addDOMListener("change",t)}},{key:"ensureFieldExists",value:function(t,e){return this.hasOwnProperty(t)||(this[t]=e(this)),this[t]}},{key:"element",get:function(){return this._element||(this._element=$(this.node)),this._element}}]),e}(C),L=r([["id"],["action"],["colspan"],["default"],["disabled",{noValue:!0}],["fixed"],["forAttr",{domName:"for"}],["hidden"],["href"],["rel"],["minHeight"],["minWidth"],["role"],["target"],["HTMLtitle",{domName:"title"}],["type"],["placeholder"],["src"],["height"],["width"]]),M=function(){function t(e){var i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:L;v(this,t),this.attributes=new Map,this.classes=new Set,this.styleMap=null;for(var n in e)if((n.startsWith("data-")||n.startsWith("aria-"))&&this.attributes.set(n,e[n]),i.has(n)){var o=i.get(n),r=e[n];o.noValue&&(r=r?"":void 0),this.attributes.set(o.domName,r)}if(e.hasOwnProperty("classes")?this.classes=new Set(e.classes.filter(function(t){return t})):e.hasOwnProperty("className")&&(this.classes=new Set((e.className+"").split(/[\s,]+/).filter(function(t){return t}))),e.hasOwnProperty("style")){this.styleMap=new Map;for(var s in e.style)this.styleMap.set(s,e.style[s])}}return g(t,[{key:"setAttribute",value:function(t,e,i){void 0!==e&&(this.attributes.set(t,e),i&&i.setAttribute(t,e))}},{key:"setStyle",value:function(t,e,i){void 0!==e&&(this.styleMap||(this.styleMap=new Map),this.styleMap.set(t,e),i&&i.style[t]!==e&&(i.style[t]=e))}},{key:"addClass",value:function(t,e){if(t)if(Array.isArray(t)){var i=!0,n=!1,o=void 0;try{for(var r,s=t[Symbol.iterator]();!(i=(r=s.next()).done);i=!0){var a=r.value;this.classes.add(a),e&&e.classList.add(a)}}catch(t){n=!0,o=t}finally{try{!i&&s.return&&s.return()}finally{if(n)throw o}}}else this.addClass(t.split(/[\s,]+/),e)}},{key:"removeClass",value:function(t,e){if(t)if(Array.isArray(t)){var i=!0,n=!1,o=void 0;try{for(var r,s=t[Symbol.iterator]();!(i=(r=s.next()).done);i=!0){var a=r.value;this.classes.delete(a),e&&e.classList.remove(a)}}catch(t){n=!0,o=t}finally{try{!i&&s.return&&s.return()}finally{if(n)throw o}}}else this.removeClass(t.split(/[\s,]+/),e)}},{key:"apply",value:function(t){var e=!0,i=!1,n=void 0;try{for(var o,r=this.attributes[Symbol.iterator]();!(e=(o=r.next()).done);e=!0){var s=O(o.value,2),a=s[0],l=s[1];"undefined"!=typeof l?t.setAttribute(a,l):t.removeAttribute(a)}}catch(t){i=!0,n=t}finally{try{!e&&r.return&&r.return()}finally{if(i)throw n}}if(this.classes&&this.classes.size>0?t.className=Array.from(this.classes).join(" "):t.removeAttribute("class"),t.removeAttribute("style"),this.styleMap){var u=!0,h=!1,c=void 0;try{for(var p,d=this.styleMap[Symbol.iterator]();!(u=(p=d.next()).done);u=!0){var f=O(p.value,2),a=f[0],l=f[1];t.style[a]!==l&&(t.style[a]=l)}}catch(t){h=!0,c=t}finally{try{!u&&d.return&&d.return()}finally{if(h)throw c}}}}}]),t}(),D={renderingStack:[]};D.TextElement=function(){function t(e){v(this,t);var i="";"string"==typeof e||e instanceof String||"number"==typeof e||e instanceof Number?(i=String(e),e=null):i=e.value||i,this.setValue(i),e&&(this.options=e)}return g(t,[{key:"mount",value:function(t,e){this.parent=t,this.node||this.createNode(),this.redraw(),t.node.insertBefore(this.node,e)}},{key:"canOverwrite",value:function(t){return t.constructor===this.constructor}},{key:"getPrimitiveTag",value:function(){return Node.TEXT_NODE}},{key:"cleanup",value:function(){}},{key:"copyState",value:function(t){this.setValue(t.getValue())}},{key:"createNode",value:function(){return this.node=document.createTextNode(this.value),this.node}},{key:"setValue",value:function(t){this.value=String(t),this.node&&this.redraw()}},{key:"getValue",value:function(){return this.value}},{key:"redraw",value:function(){if(this.node){var t=this.getValue();this.node.nodeValue!==t&&(this.node.nodeValue=t)}if(this.options&&this.options.ref){var e=this.options.ref.parent,i=this.options.ref.name;e[i]=this}}}]),t}();var j=function(t){function i(t){v(this,i),t=t||{};var e=_(this,(i.__proto__||Object.getPrototypeOf(i)).call(this,null,t,!0));return e.children=[],e.setOptions(t),e}return k(i,t),g(i,[{key:"setOptions",value:function(t){this.options=t||{},this.options.children=this.options.children||[],t.hasOwnProperty("class")&&console.error("Invalid UIElement attribute: class. Did you mean className?")}},{key:"updateOptions",value:function(t){var e=Object.assign(this.options,t);this.setOptions(e)}},{key:"copyState",value:function(t){this.setOptions(t.options)}},{key:"getPrimitiveTag",value:function(){return this.options.primitiveTag||"div"}},{key:"getGivenChildren",value:function(){return this.options.children||[]}},{key:"getTitle",value:function(){return this.options.title||""}},{key:"renderHTML",value:function(){return this.options.children}},{key:"createNode",value:function(){return this.node=document.createElement(this.getPrimitiveTag()),this.node}},{key:"addCleanupTask",value:function(t){this.cleanupTasks||(this.cleanupTasks=[]),this.cleanupTasks.push(t)}},{key:"destroyNode",value:function(){this.cleanup(),this.node.remove(),this.node=void 0}},{key:"runCleanupTasks",value:function(){if(this.cleanupTasks){var t=!0,e=!1,i=void 0;try{for(var n,o=this.cleanupTasks[Symbol.iterator]();!(t=(n=o.next()).done);t=!0){var r=n.value;r.cleanup()}}catch(t){e=!0,i=t}finally{try{!t&&o.return&&o.return()}finally{if(e)throw i}}}}},{key:"cleanup",value:function(){this.runCleanupTasks();var t=!0,e=!1,n=void 0;try{for(var o,r=this.children[Symbol.iterator]();!(t=(o=r.next()).done);t=!0){var s=o.value;s.cleanup()}}catch(t){e=!0,n=t}finally{try{!t&&r.return&&r.return()}finally{if(e)throw n}}this.clearNode(),b(i.prototype.__proto__||Object.getPrototypeOf(i.prototype),"cleanup",this).call(this)}},{key:"applyRef",value:function(){if(this.options.ref){var t=this.options.ref.parent,e=this.options.ref.name;t[e]=this}}},{key:"canOverwrite",value:function(t){return this.constructor===t.constructor&&this.getPrimitiveTag()===t.getPrimitiveTag()}},{key:"overwriteChild",value:function(t,e){return t.copyState(e),t}},{key:"getElementKeyMap",value:function(t){for(var e=new Map,i=0;i<t.length;i+=1){var n=t[i].options&&t[i].options.key||"autokey"+i;e.set(n,t[i])}return e}},{key:"redraw",value:function(){if(!this.node)return console.warn("Element not yet mounted. Redraw aborted!",this),!1;D.renderingStack.push(this);var t=e(this.renderHTML());if(D.renderingStack.pop(),t===this.children){for(var i=0;i<t.length;i+=1)t[i].redraw();return void this.applyDOMAttributes()}for(var n=this.node,o=this.getElementKeyMap(this.children),r=0;r<t.length;r++){var s=t[r],a=r>0?t[r-1].node:null,l=a?a.nextSibling:n.firstChild;s.getPrimitiveTag||(s=t[r]=new D.TextElement(s));var u=s.options&&s.options.key||"autokey"+r,h=o.get(u);h&&t[r].canOverwrite(h)?(h!==t[r]&&(t[r]=this.overwriteChild(h,t[r])),t[r].redraw(),t[r].node!==l&&n.insertBefore(t[r].node,l)):s.mount(this,l)}for(var c=new Set,p=0;p<t.length;p+=1)c.add(t[p].node);for(var d=0;d<this.children.length;d+=1)c.has(this.children[d].node)||(this.children[d].cleanup(),n.removeChild(this.children[d].node));return this.children=t,this.applyDOMAttributes(),this.applyRef(),!0}},{key:"applyDOMAttributes",value:function(){this.domAttributes=this.getDOMAttributes(),this.domAttributes.apply(this.node)}},{key:"setAttribute",value:function(t,e){this.domAttributes.setAttribute(t,e,this.node)}},{key:"setStyle",value:function(t,e){this.options.style=this.options.style||{},this.options.style[t]=e,this.domAttributes.setStyle(t,e,this.node)}},{key:"addClass",value:function(t){this.domAttributes.addClass(String(t),this.node)}},{key:"removeClass",value:function(t){this.domAttributes.removeClass(String(t),this.node)}},{key:"hasClass",value:function(t){return this.node&&this.node.classList.contains(t)}},{key:"toggleClass",value:function(t){this.hasClass(t)?this.removeClass(t):this.addClass(t)}},{key:"getDOMAttributes",value:function(){if(this.constructor.extraDOMAttributes){var t=b(i.prototype.__proto__||Object.getPrototypeOf(i.prototype),"getDOMAttributes",this).call(this);return this.extraDOMAttributes(t),t}return new M(this.options,this.constructor.domAttributesMap)}},{key:"refLink",value:function(t){return{parent:this,name:t}}},{key:"refLinkArray",value:function(t,e){for(this.hasOwnProperty(t)||(this[t]=[]);e>=this[t].length;)this[t].push(null);return{parent:this[t],name:e}}},{key:"mount",value:function(t,e){var i=this;t.node||(t=new x(t)),this.parent=t,this.node||this.createNode(),this.redraw(),t.insertChildNodeBefore(this,e),this.options.onClick&&(this.onClickHandler=function(t){D.event=t,i.options.onClick&&i.options.onClick(i)},this.addClickListener(this.onClickHandler)),this.onMount()}},{key:"onMount",value:function(){}},{key:"appendChild",value:function(t){if(this.children!==this.options.children)throw"Can't properly handle appendChild, you need to implement it for "+this.constructor;return this.options.children.push(t),t.mount(this,null),t}},{key:"insertChild",value:function(t,e){if(this.children!==this.options.children)throw"Can't properly handle insertChild, you need to implement it for "+this.constructor;return e=e||0,this.options.children.splice(e,0,t),t.mount(this,e+1<this.options.children.length?this.children[e+1].node:null),t}},{key:"eraseChild",value:function(t){var e=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],i=this.options.children.indexOf(t);return i<0?null:this.eraseChildAtIndex(i,e)}},{key:"eraseChildAtIndex",value:function(t){var e=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];if(t<0||t>=this.options.children.length)return void console.error("Erasing child at invalid index ",t,this.options.children.length);if(this.children!==this.options.children)throw"Can't properly handle eraseChild, you need to implement it for "+this.constructor;var i=this.options.children.splice(t,1)[0];return e?i.destroyNode():this.node.removeChild(i.node),i}},{key:"eraseAllChildren",value:function(){for(;this.children.length>0;)this.eraseChildAtIndex(this.children.length-1)}},{key:"show",value:function(){this.removeClass("hidden")}},{key:"hide",value:function(){this.addClass("hidden")}}],[{key:"create",value:function(t,e){var i=new this(e);return i.mount(t,null),i}}]),i}(x);j.domAttributesMap=L,D.createElement=function(t,i){if(!t)return void console.error("Create element needs a valid object tag, did you mistype a class name?");if(i=i||{},!i.children||arguments.length>2){i.children=[];for(var n=2;n<arguments.length;n+=1)i.children.push(arguments[n])}i.children=[];for(var o=2;o<arguments.length;o+=1)i.children.push(arguments[o]);if(i.children=e(i.children),i.ref){if("string"==typeof i.ref){if(!(D.renderingStack.length>0))throw Error("Failed to automatically link ref, there needs to be an element in the rendering stack");i.ref={parent:D.renderingStack[D.renderingStack.length-1],name:i.ref}}i.key&&console.error("Warning! UI Element cannot have both a key and a ref fieldname. Key will be overriden.\nAre you using the options from another object?",i),i.key="_ref"+i.ref.name}return"string"==typeof t&&(i.primitiveTag=t,t=j),new t(i)},D.Element=j,D.str=function(t){return new D.TextElement({value:t})},D.StyleInstance=function(t){function e(t){v(this,e);var i=_(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t));return i.setOptions(t),i}return k(e,t),g(e,[{key:"setOptions",value:function(t){this.options=t,this.options.attributes=this.options.attributes||{},this.attributes=new Map;for(var e in this.options.attributes)this.attributes.set(e,this.options.attributes[e])}},{key:"getValue",value:function(){var t=this.options.selector+"{",e=!0,i=!1,n=void 0;try{for(var o,r=this.attributes[Symbol.iterator]();!(e=(o=r.next()).done);e=!0){var s=O(o.value,2),a=s[0],l=s[1];"function"==typeof l&&(l=l()),null!=l&&(t+=a+":"+l+";")}}catch(t){i=!0,n=t}finally{try{!e&&r.return&&r.return()}finally{if(i)throw n}}return t+"}"}},{key:"copyState",value:function(t){this.setOptions(t.options)}},{key:"setAttribute",value:function(t,e){this.attributes.set(t,e),this.redraw()}},{key:"deleteAttribute",value:function(t){this.attributes.delete(t),this.redraw()}}]),e}(D.TextElement),D.StyleElement=function(t){function e(){return v(this,e),_(this,(e.__proto__||Object.getPrototypeOf(e)).apply(this,arguments))}return k(e,t),g(e,[{key:"getPrimitiveTag",value:function(){return"style"}},{key:"getDOMAttributes",value:function(){var t=new M({});return t.setAttribute("name",this.options.name),t}}]),e}(D.Element);var I=new Set([":",">"," ","+","~","[","."]);D.DynamicStyleElement=function(t){function e(){return v(this,e),_(this,(e.__proto__||Object.getPrototypeOf(e)).apply(this,arguments))}return k(e,t),g(e,[{key:"toString",value:function(){return this.getClassName()}},{key:"getClassName",value:function(){return this.className?this.className:(this.constructor.instanceCounter=(this.constructor.instanceCounter||0)+1,this.className="autocls-"+this.constructor.instanceCounter,this.className)}},{key:"getStyleInstances",value:function(t,e){var i=[],n={},o=!1;for(var r in e){var s=e[r],a="string"==typeof s||s instanceof String||"number"==typeof s||s instanceof Number||"function"==typeof s;if(a)n[r]=s,o=!0;else{var l=String(r).charAt(0);if(!I.has(l))continue;var u=this.getStyleInstances(t+r,s);i.push.apply(i,T(u))}}return o&&i.unshift(new D.StyleInstance({selector:t,key:t,attributes:n})),i}},{key:"renderHTML",value:function(){return this.getStyleInstances("."+this.getClassName(),this.options.style||{})}},{key:"setStyle",value:function(t,e){this.options.style[t]=e,this.children[0].setAttribute(t,e)}},{key:"setSubStyle",value:function(t,e,i){throw Error("Implement me!")}},{key:"getStyleObject",value:function(){return this.options.style}}]),e}(D.StyleElement);var F=function(t){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};v(this,e);var i=_(this,(e.__proto__||Object.getPrototypeOf(e)).call(this));i.options=t,i.elements=new Set,i.options.updateOnResize&&window.addEventListener("resize",function(){i.update()});var n={children:[],name:i.options.name};return i.styleElement=D.StyleElement.create(document.head,n),i}return k(e,t),g(e,[{key:"css",value:function(t){arguments.length>1&&(t=Object.assign.apply(Object,[{}].concat(Array.prototype.slice.call(arguments))));var e=new D.DynamicStyleElement({style:t});this.elements.add(e);var i=e.renderHTML(),n=!0,o=!1,r=void 0;try{for(var s,a=i[Symbol.iterator]();!(n=(s=a.next()).done);n=!0){var l=s.value;this.styleElement.appendChild(l)}}catch(t){o=!0,r=t}finally{try{!n&&a.return&&a.return()}finally{if(o)throw r}}return e}},{key:"keyframe",value:function(t){throw Error("Not implemented yet!")}},{key:"addBeforeUpdateListener",value:function(t){return this.addListener("beforeUpdate",t)}},{key:"update",value:function(){this.dispatch("beforeUpdate",this);var t=[],e=!0,i=!1,n=void 0;try{for(var o,r=this.elements[Symbol.iterator]();!(e=(o=r.next()).done);e=!0){var s=o.value;if(s instanceof D.StyleElement){var a=s.renderHTML();t.push.apply(t,T(a))}}}catch(t){i=!0,n=t}finally{try{!e&&r.return&&r.return()}finally{if(i)throw n}}this.styleElement.options.children=t,this.styleElement.redraw()}}]),e}(C),N=function(){function t(e,i){v(this,t),this.classList=e,this.element=i}return g(t,[{key:"set",value:function(t,e){e||(e=t,t=this.element);var i=!0,n=!1,o=void 0;try{for(var r,s=this.classList[Symbol.iterator]();!(i=(r=s.next()).done);i=!0){var a=r.value;a===e?t.addClass(a):t.removeClass(a)}}catch(t){n=!0,o=t}finally{try{!i&&s.return&&s.return()}finally{if(n)throw o}}}}],[{key:"fromObject",value:function(e,i){var n=[];for(var o in e)e.hasOwnProperty(o)&&n.push(e[o]);return Object.assign(new t(n,i),e)}}]),t}(),V=new WeakMap;D.DoubleClickable=function(t){return function(t){function e(){return v(this,e),_(this,(e.__proto__||Object.getPrototypeOf(e)).apply(this,arguments))}return k(e,t),g(e,[{key:"addClickListener",value:function(t){var i=this;if(this.ensureFieldExists("_singleClickCallbacks",function(t){return new Map}),!this._singleClickCallbacks.has(t)){var n=function(){var e=Date.now();!i.hasOwnProperty("_singleClickTime")||e-i._singleClickTime>=i.getSingleClickTimeout()?(setTimeout(function(){i._singleClickTime=e}),setTimeout(function(){i.hasOwnProperty("_singleClickTime")&&i._singleClickTime===e&&t()},i.getSingleClickTimeout())):setTimeout(function(){delete i._singleClickTime})};this._singleClickCallbacks.set(t,n),b(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"addClickListener",this).call(this,n)}}},{key:"getSingleClickTimeout",value:function(){return 250}},{key:"removeClickListener",value:function(t){if(this._singleClickCallbacks){var i=this._singleClickCallbacks.get(t);i&&(this._singleClickCallbacks.delete(t),b(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"removeClickListener",this).call(this,i))}}},{key:"addDoubleClickListener",value:function(t){var i=this;if(this.ensureFieldExists("_doubleClickCallbacks",function(t){return new Map}),!this._doubleClickCallbacks.has(t)){
var n=function(){var e=(new Date).getTime();console.log(e),!i.hasOwnProperty("_singleClickTime")||e-i._singleClickTime>=i.getSingleClickTimeout()?setTimeout(function(){i._singleClickTime=e}):(setTimeout(function(){delete i._singleClickTime}),t())};this._doubleClickCallbacks.set(t,n),b(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"addClickListener",this).call(this,n)}}},{key:"removeDoubleClickListener",value:function(t){if(this._doubleClickCallbacks){var i=this._doubleClickCallbacks.get(t);i&&(this._doubleClickCallbacks.delete(t),b(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"removeClickListener",this).call(this,i))}}}]),e}(t)},D.Draggable=function(t){var e=function(t){function e(){return v(this,e),_(this,(e.__proto__||Object.getPrototypeOf(e)).apply(this,arguments))}return k(e,t),g(e,[{key:"addClickListener",value:function(t){var i=this;if(this.ensureFieldExists("_clickCallbacks",function(t){return new Map}),!this._clickCallbacks.has(t)){var n=function(){i._okForClick&&t()};if(this._clickCallbacks.set(t,n),b(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"addClickListener",this).call(this,n),this.hasOwnProperty("_clickDragListeners")||(this._clickDragListeners=new Map),!this._clickDragListeners.has(t)){var o={onStart:function(){i.dragForClickStarted()},onDrag:function(){i.dragForClick()}};this._clickDragListeners.set(t,o),this.addDragListener(o)}}}},{key:"dragForClickStarted",value:function(){this._okForClick=!0}},{key:"dragForClick",value:function(){this._okForClick=!1}},{key:"removeClickListener",value:function(t){if(this._clickCallbacks){var i=this._clickCallbacks.get(t);if(i&&(this._clickCallbacks.delete(t),b(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"removeClickListener",this).call(this,i)),this._clickDragListeners){var n=this._clickDragListeners.get(t);n&&(this._clickDragListeners.delete(t),this.removeDragListener(n))}}}},{key:"createDragListenerWrapper",value:function(t){var e=Object.assign({},t);return e.onWrapperDrag=function(i){var n=i.clientX-e._lastX;e._lastX=i.clientX;var o=i.clientY-e._lastY;e._lastY=i.clientY,t.onDrag(n,o)},e.onWrapperStart=function(i){e._lastX=i.clientX,e._lastY=i.clientY,t.onStart&&t.onStart(i),document.body.addEventListener("mousemove",e.onWrapperDrag)},e.onWrapperEnd=function(i){t.onEnd&&t.onEnd(i),document.body.removeEventListener("mousemove",e.onWrapperDrag)},e}},{key:"createTouchDragListenerWrapper",value:function(t){var e=Object.assign({},t);return e.onWrapperDrag=function(i){var n=i.targetTouches[0],o=n.pageX-e._lastX;e._lastX=n.pageX;var r=n.pageY-e._lastY;e._lastY=n.pageY,t.onDrag(o,r)},e.onWrapperStart=function(i){var n=i.targetTouches[0];e._lastX=n.pageX,e._lastY=n.pageY,t.onStart&&t.onStart(i),i.preventDefault(),document.body.addEventListener("touchmove",e.onWrapperDrag)},e.onWrapperEnd=function(i){t.onEnd&&t.onEnd(i),document.body.removeEventListener("touchmove",e.onWrapperDrag)},e}},{key:"addDragListener",value:function(t){var e=this.createDragListenerWrapper(t),i=this.createTouchDragListenerWrapper(t);this.addDOMListener("touchstart",i.onWrapperStart),this.addDOMListener("mousedown",e.onWrapperStart),document.body.addEventListener("touchend",i.onWrapperEnd),document.body.addEventListener("mouseup",e.onWrapperEnd),this.hasOwnProperty("_dragListeners")||(this._dragListeners=[]),this._dragListeners.push(i),this._dragListeners.push(e)}},{key:"removeDragListener",value:function(t){if(this._dragListeners)for(var e=this._dragListeners.length-1;e>=0;e-=1)this._dragListeners[e].onStart===t.onStart&&this._dragListeners[e].onDrag===t.onDrag&&this._dragListeners[e].onEnd===t.onEnd&&(this.removeDOMListener("touchstart",this._dragListeners[e].onWrapperStart),document.body.removeEventListener("touchmove",this._dragListeners[e].onWrapperDrag),document.body.removeEventListener("touchmove",this._dragListeners[e].onWrapperEnd),this.removeDOMListener("mousedown",this._dragListeners[e].onWrapperStart),document.body.removeEventListener("mousemove",this._dragListeners[e].onWrapperDrag),document.body.removeEventListener("mousemove",this._dragListeners[e].onWrapperEnd),this._dragListeners.splice(e,1))}}]),e}(t);return e};var H=["requestFullscreen","webkitRequestFullscreen","msRequestFullscreen","mozRequestFullScreen"],R=["exitFullscreen","webkitExitFullscreen","msExitFullscreen","mozCancelFullScreen"],B=["webkitfullscreenchange","mozfullscreenchange","fullscreenchange","MSFullscreenChange"];D.FullScreenable=function(t){return function(t){function e(){return v(this,e),_(this,(e.__proto__||Object.getPrototypeOf(e)).apply(this,arguments))}return k(e,t),g(e,[{key:"enterFullScreen",value:function(){return this.attachEnterFullscreenHandler(),c(this.node,H)?void(this._expectingFullScreen=!0):void console.error("No valid full screen function available")}},{key:"isFullScreen",value:function(){return this._isFullScreen}},{key:"exitFullScreen",value:function(){if(!c(document,R))return void console.error("No valid available function to exit fullscreen")}},{key:"toggleFullScreen",value:function(){this.isFullScreen()?this.exitFullScreen():this.enterFullScreen()}},{key:"attachEnterFullscreenHandler",value:function(){var t=this;if(!this._attachedFullscreenHandler){this._attachedFullscreenHandler=!0;var e=function(){t._expectingFullScreen?(t._expectingFullScreen=!1,t._isFullScreen=!0,t.dispatch("enterFullScreen")):t._isFullScreen&&(t._isFullScreen=!1,t.dispatch("exitFullScreen")),t.dispatch("resize")},i=!0,n=!1,o=void 0;try{for(var r,s=B[Symbol.iterator]();!(i=(r=s.next()).done);i=!0){var a=r.value;document.addEventListener(a,e)}}catch(t){n=!0,o=t}finally{try{!i&&s.return&&s.return()}finally{if(n)throw o}}}}}]),e}(t)};var W=function(){function t(){v(this,t)}return g(t,null,[{key:"isTouchDevice",value:function(){return this.hasOwnProperty("_isTouchDevice")||(this._isTouchDevice=!!("createTouch"in window.document||navigator.MaxTouchPoints>0||navigator.msMaxTouchPoints>0||"ontouchstart"in window)),this._isTouchDevice}},{key:"getEventCoord",value:function(t,e){var i="page"+e;if(this.isTouchDevice()){if(t.targetTouches)return t.targetTouches[0][i];if(t.originalEvent&&t.originalEvent.targetTouches)return t.originalEvent.targetTouches[0][i]}return t[i]}},{key:"getEventX",value:function(t){return this.getEventCoord(t,"X")}},{key:"getEventY",value:function(t){return this.getEventCoord(t,"Y")}},{key:"getBrowser",value:function(){return window.opr&&opr.addons||window.opera||navigator.userAgent.indexOf(" OPR/")>=0?"Opera":"undefined"!=typeof InstallTrigger?"Firefox":Object.prototype.toString.call(window.HTMLElement).indexOf("Constructor")>0?"Safari":document.documentMode?"Internet Explorer":window.StyleMedia?"Edge":window.chrome&&window.chrome.webstore?"Chrome":"Unknown"}},{key:"supportsEvent",value:function(t){if(!this.cachedSupportedValues.has(t)){var e=document.createElement("div"),i="on"+t,n=i in e;n||(e.setAttribute(i,"return;"),n="function"==typeof e[i]),e=null,this.cachedSupportedValues.set(t,n)}return this.cachedSupportedValues.get(t)}}]),t}();W.cachedSupportedValues=new Map,D.Orientation={HORIZONTAL:1,VERTICAL:2},D.Direction={UP:"up",LEFT:"left",DOWN:"down",RIGHT:"right"},D.Level={NONE:null,DEFAULT:"default",INFO:"info",PRIMARY:"primary",SUCCESS:"success",WARNING:"warning",DANGER:"danger",ERROR:"danger"},D.Size={NONE:null,EXTRA_SMALL:"xs",SMALL:"sm",DEFAULT:"default",LARGE:"lg"},D.VoteStatus={NONE:null,LIKE:1,DISLIKE:-1},D.ActionStatus={DEFAULT:1,RUNNING:2,SUCCESS:3,FAILED:4},D.Panel=function(t){function e(){return v(this,e),_(this,(e.__proto__||Object.getPrototypeOf(e)).apply(this,arguments))}return k(e,t),g(e,[{key:"getTitle",value:function(){return this.options.title}}]),e}(D.Element),D.SlideBar=function(t){function e(t){return v(this,e),_(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t))}return k(e,t),g(e,[{key:"getDOMAttributes",value:function(){var t=b(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"getDOMAttributes",this).call(this);return t.setStyle("display","inline-block"),t.setStyle("position","relative"),t.setStyle("cursor","pointer"),t}},{key:"getSliderLeft",value:function(){return this.options.value*this.options.width-this.options.barWidth/2}},{key:"renderHTML",value:function(){return[D.createElement(D.ProgressBar,{ref:"progressBar",active:"true",value:this.options.value,disableTransition:!0,style:{height:"5px",width:this.options.width+"px",position:"relative",top:"15px"}}),D.createElement("div",{ref:"slider",style:{width:this.options.barWidth+"px",height:"20px","background-color":"black",position:"absolute",left:this.getSliderLeft()+"px",top:"7.5px"}})]}},{key:"setValue",value:function(t){t=Math.max(t,0),t=Math.min(t,1),this.options.value=t,this.progressBar.set(this.options.value),this.slider.setStyle("left",this.getSliderLeft()+"px"),this.onSetValue&&this.onSetValue(this.options.value)}},{key:"getValue",value:function(){return this.options.value}},{key:"onMount",value:function(){var t=this;this.addDragListener({onStart:function(e){t.setValue((W.getEventX(e)-t.progressBar.getOffset().left)/t.options.width)},onDrag:function(e,i){t.setValue(t.options.value+e/t.options.width)}})}}]),e}(D.Draggable(D.Element)),D.Link=function(t){function e(){return v(this,e),_(this,(e.__proto__||Object.getPrototypeOf(e)).apply(this,arguments))}return k(e,t),g(e,[{key:"getPrimitiveTag",value:function(){return"a"}},{key:"getDOMAttributes",value:function(){var t=b(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"getDOMAttributes",this).call(this);return t.setStyle("cursor","pointer"),t}},{key:"setOptions",value:function(t){return t=Object.assign({newTab:!0},t),b(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"setOptions",this).call(this,t),this.options.newTab&&(this.options.target="_blank"),t}},{key:"renderHTML",value:function(){return[this.options.value]}}]),e}(D.Element),D.Image=function(t){function e(){return v(this,e),_(this,(e.__proto__||Object.getPrototypeOf(e)).apply(this,arguments))}return k(e,t),g(e,[{key:"getPrimitiveTag",value:function(){return"img"}}]),e}(D.Element),D.RawHTML=function(t){function e(){return v(this,e),_(this,(e.__proto__||Object.getPrototypeOf(e)).apply(this,arguments))}return k(e,t),g(e,[{key:"redraw",value:function(){this.node.innerHTML=this.options.__innerHTML,this.applyDOMAttributes()}}]),e}(D.Element),D.TemporaryMessageArea=function(t){function e(){return v(this,e),_(this,(e.__proto__||Object.getPrototypeOf(e)).apply(this,arguments))}return k(e,t),g(e,[{key:"setOptions",value:function(t){t=Object.assign(this.constructor.getDefaultOptions(),t),b(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"setOptions",this).call(this,t)}},{key:"getPrimitiveTag",value:function(){return"span"}},{key:"renderHTML",value:function(){return[D.createElement(D.TextElement,{ref:"textElement",value:this.options.value||""})]}},{key:"getDOMAttributes",value:function(){var t=b(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"getDOMAttributes",this).call(this);return t.setStyle("marginLeft",this.options.margin+"px"),t.setStyle("marginRight",this.options.margin+"px"),t}},{key:"setValue",value:function(t){this.options.value=t,this.textElement.setValue(t)}},{key:"setColor",value:function(t){this.setStyle("color",t),this.applyDOMAttributes()}},{key:"showMessage",value:function(t){var e=this,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"black",n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:2e3;this.setColor(i),this.clear(),this.setValue(t),n&&(this.clearValueTimeout=setTimeout(function(){return e.clear()},n))}},{key:"clear",value:function(){this.setValue(""),this.clearValueTimeout&&(clearTimeout(this.clearValueTimeout),this.clearValueTimeout=null)}}],[{key:"getDefaultOptions",value:function(){return{margin:10}}}]),e}(D.Element),D.ScrollableMixin=function(t){function e(){return v(this,e),_(this,(e.__proto__||Object.getPrototypeOf(e)).apply(this,arguments))}return k(e,t),g(e,[{key:"getDesiredExcessHeightTop",value:function(){return 600}},{key:"getDesiredExcessHeightBottom",value:function(){return 600}},{key:"getHeightScrollPercent",value:function(){var t=this.node.scrollHeight,e=this.node.clientHeight;return t===e?0:this.node.scrollTop/(t-e)}},{key:"getExcessTop",value:function(){return this.node.scrollTop}},{key:"getExcessBottom",value:function(){var t=this.node.scrollHeight,e=this.node.clientHeight;return t-e-this.node.scrollTop}},{key:"haveExcessTop",value:function(){return this.getExcessTop()>this.getDesiredExcessHeightTop()}},{key:"haveExcessBottom",value:function(){return this.getExcessBottom()>this.getDesiredExcessHeightBottom()}},{key:"popChildTop",value:function(){this.eraseChildAtIndex(0)}},{key:"popChildBottom",value:function(){this.eraseChildAtIndex(this.children.length-1)}},{key:"removeExcessTop",value:function(){for(;this.haveExcessTop();)this.popChildTop()}},{key:"removeExcessBottom",value:function(){for(;this.haveExcessBottom();)this.popChildBottom()}},{key:"pushChildTop",value:function(t){var e=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];e&&this.removeExcessBottom(),this.insertChild(t,0)}},{key:"pushChildBottom",value:function(t){var e=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];e&&this.removeExcessTop(),this.appendChild(t),this.appendChild(t)}},{key:"saveScrollPosition",value:function(){this.options.scrollTop=this.node.scrollTop;var t=this.node.scrollHeight-this.node.clientHeight;this.options.scrollInfo={scrollAtTop:0===this.options.scrollTop,scrollAtBottom:this.options.scrollTop===t}}},{key:"applyScrollPosition",value:function(){this.node.scrollTop=this.options.scrollTop||this.node.scrollTop}},{key:"scrollToHeight",value:function(t){this.node.scrollTop=t}},{key:"scrollToTop",value:function(){this.scrollToHeight(0)}},{key:"scrollToBottom",value:function(){this.scrollToHeight(this.node.scrollHeight)}}]),e}(D.Element),D.InfiniteScrollable=function(t){function e(){return v(this,e),_(this,(e.__proto__||Object.getPrototypeOf(e)).apply(this,arguments))}return k(e,t),g(e,[{key:"setOptions",value:function(t){t=Object.assign({entries:[],entryComparator:function(t,e){return t.id-e.id},firstRenderedEntry:0,lastRenderedEntry:-1},t),b(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"setOptions",this).call(this,t),this.options.children=[],this.options.staticTop&&this.options.children.push(this.options.staticTop);var i=!0,n=!1,o=void 0;try{for(var r,s=this.options.entries[Symbol.iterator]();!(i=(r=s.next()).done);i=!0){var a=r.value;this.options.children.push(this.renderEntry(a))}}catch(t){n=!0,o=t}finally{try{!i&&s.return&&s.return()}finally{if(n)throw o}}}},{key:"getFirstVisibleIndex",value:function(){}},{key:"getLastVisibleIndex",value:function(){}},{key:"renderEntry",value:function(t){return this.options.entryRenderer?this.options.entryRenderer(t):void console.error("You need to pass option entryRenderer or overwrite the renderEntry method")}},{key:"pushEntry",value:function(t){this.insertEntry(t,this.options.entries.length)}},{key:"insertEntry",value:function(t,e){var i=this.options.entries;if(null==e)for(e=0;e<i.length&&this.options.entryComparator(i[e],t)<=0;)e++;i.splice(e,0,t),this.options.staticTop&&(e+=1);var n=this.renderEntry(t);this.insertChild(n,e)}}]),e}(D.ScrollableMixin),D.TimePassedSpan=function(t){function e(){return v(this,e),_(this,(e.__proto__||Object.getPrototypeOf(e)).apply(this,arguments))}return k(e,t),g(e,[{key:"getPrimitiveTag",value:function(){return"span"}},{key:"renderHTML",value:function(){return this.getTimeDeltaDisplay(this.options.timeStamp)}},{key:"getDOMAttributes",value:function(){var t=b(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"getDOMAttributes",this).call(this);return t.setStyle("color","#AAA"),t}},{key:"getTimeDeltaDisplay",value:function(t){var e=Date.now(),i=parseInt((e-1e3*t)/1e3),n=[31556926,2629743,604800,86400,3600,60],o=["year","month","week","day","hour","minute"];i<0&&(i=0);for(var r=0;r<o.length;r+=1){var s=parseInt(i/n[r]);if(n[r]<=i)return s+" "+o[r]+(s>1?"s":"")+" ago"}return"Few seconds ago"}},{key:"onMount",value:function(){var t=this;this.constructor.addIntervalListener(function(){t.redraw()})}}],[{key:"addIntervalListener",value:function(t){var e=this;this.updateFunction||(this.TIME_DISPATCHER=new C,this.updateFunction=setInterval(function(){e.TIME_DISPATCHER.dispatch("updateTimeValue")},5e3)),this.TIME_DISPATCHER.addListener("updateTimeValue",t)}}]),e}(D.Element),D.ConstructorInitMixin=function(t){var e=function(t){function e(){return v(this,e),_(this,(e.__proto__||Object.getPrototypeOf(e)).apply(this,arguments))}return k(e,t),g(e,[{key:"createNode",value:function(){return this.constructor.ensureInit(),b(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"createNode",this).call(this)}}],[{key:"ensureInit",value:function(){this._haveInit||(this._haveInit=!0,"function"==typeof this.init&&this.init())}}]),e}(t);return e},D.body=new D.Element,D.body.node=document.body,D.Form=function(t){function e(){return v(this,e),_(this,(e.__proto__||Object.getPrototypeOf(e)).apply(this,arguments))}return k(e,t),g(e,[{key:"getPrimitiveTag",value:function(){return"form"}},{key:"getDOMAttributes",value:function(){var t=b(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"getDOMAttributes",this).call(this);return t.addClass("form form-horizontal"),t}},{key:"onMount",value:function(){}}]),e}(D.Element),D.Input=function(t){function e(){return v(this,e),_(this,(e.__proto__||Object.getPrototypeOf(e)).apply(this,arguments))}return k(e,t),g(e,[{key:"getPrimitiveTag",value:function(){return"input"}},{key:"getDOMAttributes",value:function(){var t=b(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"getDOMAttributes",this).call(this),i=this.getInputType();return i&&t.setAttribute("type",i),t}},{key:"redraw",value:function(){b(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"redraw",this).call(this),this.options.hasOwnProperty("value")&&this.setValue(this.options.value)}},{key:"getValue",value:function(){return this.node.value}},{key:"setValue",value:function(t){this.node.value=t}},{key:"getInputType",value:function(){return null}},{key:"onInput",value:function(t){this.addDOMListener("input change",t)}},{key:"onKeyUp",value:function(t){this.addDOMListener("keyup",t)}}]),e}(D.Element),D.FormControl=function(t){function e(){return v(this,e),_(this,(e.__proto__||Object.getPrototypeOf(e)).apply(this,arguments))}return k(e,t),g(e,[{key:"getDOMAttributes",value:function(){var t=b(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"getDOMAttributes",this).call(this);return t.addClass("form-control"),t}}]),e}(D.Input),D.FormSettingsGroup=function(t){function e(){return v(this,e),_(this,(e.__proto__||Object.getPrototypeOf(e)).apply(this,arguments))}return k(e,t),g(e,[{key:"setOptions",value:function(t){b(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"setOptions",this).call(this,t),this.options.labelWidth=this.options.labelWidth||"41%",this.options.contentWidth=this.options.contentWidth||"59%"}},{key:"getDOMAttributes",value:function(){var t=b(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"getDOMAttributes",this).call(this);return t.addClass("form-group"),t}},{key:"getLabelStyle",value:function(){return{float:"left",display:"inline-block",height:"32px","line-height":"32px"}}},{key:"getContentStyle",value:function(){return{float:"left",display:"inline-block","margin-top":"1px","margin-bottom":"1px","min-height":"30px"}}},{key:"renderHTML",value:function(){var t=Object.assign(this.getLabelStyle(),{width:this.options.labelWidth});t=Object.assign(t,this.options.labelStyle);var e=Object.assign(this.getContentStyle(),{width:this.options.contentWidth});e=Object.assign(e,this.options.contentStyle);var i=this.options.label?D.createElement("div",{style:t},this.options.label):null,n=D.createElement("div",{style:e},this.options.children);return this.options.contentFirst?[n,i]:[i,n]}}]),e}(D.Element),D.FormGroup=function(t){function e(){return v(this,e),_(this,(e.__proto__||Object.getPrototypeOf(e)).apply(this,arguments))}return k(e,t),g(e,[{key:"setOptions",value:function(t){b(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"setOptions",this).call(this,t),this.options.labelWidth=this.options.labelWidth||"16%",this.options.contentWidth=this.options.contentWidth||"32%",this.options.errorFieldWidth=this.options.errorFieldWidth||"48%"}},{key:"getDOMAttributes",value:function(){var t=b(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"getDOMAttributes",this).call(this);return t.addClass("form-group"),t}},{key:"getDefaultStyle",value:function(){return{float:"left",position:"relative","min-height":"1px","padding-right":"15px","padding-left":"15px"}}},{key:"renderHTML",value:function(){var t=Object.assign(this.getDefaultStyle(),{width:this.options.labelWidth});t=Object.assign(t,this.options.style);var e=Object.assign(this.getDefaultStyle(),{width:this.options.contentWidth});e=Object.assign(e,this.options.style);var i=Object.assign(this.getDefaultStyle(),{width:this.options.errorFieldWidth});return[this.options.label?D.createElement("label",{className:"control-label",style:t},this.options.label):null,D.createElement("div",{style:e},this.options.children),D.createElement("span",{ref:"errorField",style:i})]}},{key:"setError",value:function(t){this.errorField.node.textContent=t,this.addClass("has-error")}},{key:"removeError",value:function(){this.errorField.node.textContent="",this.removeClass("has-error")}}]),e}(D.Element),D.Input.domAttributesMap=r(D.Element.domAttributesMap,[["autocomplete"],["autofocus",{noValue:!0}],["formaction"],["maxLength",{domName:"maxlength"}],["minLength",{domName:"minlength"}],["name"],["placeholder"],["readonly"],["required"],["value"]]),D.SubmitInput=function(t){function e(){return v(this,e),_(this,(e.__proto__||Object.getPrototypeOf(e)).apply(this,arguments))}return k(e,t),g(e,[{key:"getInputType",value:function(){return"submit"}}]),e}(D.Input),D.SubmitInput.domAttributesMap=r(D.Element.domAttributesMap,[["formenctype"],["formmethod"],["formnovalidate"],["formtarget"]]),D.TextInputInterface=function(t){return function(t){function e(){return v(this,e),_(this,(e.__proto__||Object.getPrototypeOf(e)).apply(this,arguments))}return k(e,t),g(e,[{key:"getInputType",value:function(){return"text"}}]),e}(t)},D.TextInput=D.TextInputInterface(D.Input),D.FormTextInput=D.TextInputInterface(D.FormControl),D.NumberInputInterface=function(t){var e=function(t){function e(){return v(this,e),_(this,(e.__proto__||Object.getPrototypeOf(e)).apply(this,arguments))}return k(e,t),g(e,[{key:"getInputType",value:function(){return"number"}},{key:"getValue",value:function(){var t=b(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"getValue",this).call(this);return parseInt(t)||parseFloat(t)}}]),e}(t);return e.domAttributesMap=r(D.Element.domAttributesMap,[["min"],["max"],["step"]]),e},D.NumberInput=D.NumberInputInterface(D.Input),D.FormNumberInput=D.NumberInputInterface(D.FormControl),D.EmailInputInterface=function(t){return function(t){function e(){return v(this,e),_(this,(e.__proto__||Object.getPrototypeOf(e)).apply(this,arguments))}return k(e,t),g(e,[{key:"getInputType",value:function(){return"email"}}]),e}(t)},D.EmailInput=D.EmailInputInterface(D.Input),D.FormEmailInput=D.EmailInputInterface(D.FormControl),D.PasswordInputInterface=function(t){return function(t){function e(){return v(this,e),_(this,(e.__proto__||Object.getPrototypeOf(e)).apply(this,arguments))}return k(e,t),g(e,[{key:"getInputType",value:function(){return"password"}}]),e}(t)},D.PasswordInput=D.PasswordInputInterface(D.Input),D.FormPasswordInput=D.PasswordInputInterface(D.FormControl),D.FileInputInterface=function(t){var e=function(t){function e(){return v(this,e),_(this,(e.__proto__||Object.getPrototypeOf(e)).apply(this,arguments))}return k(e,t),g(e,[{key:"getInputType",value:function(){return"file"}},{key:"getFiles",value:function(){return this.node.files}},{key:"getFile",value:function(){return this.getFiles()[0]}}]),e}(t);return e.domAttributesMap=r(D.Element.domAttributesMap,[["multipleFiles",{domName:"multiple",noValue:!0}],["fileTypes",{domName:"accept"}]]),e},D.FileInput=D.FileInputInterface(D.Input),D.FormFileInput=D.FileInputInterface(D.FormControl),D.CheckboxInput=function(t){function e(){return v(this,e),_(this,(e.__proto__||Object.getPrototypeOf(e)).apply(this,arguments))}return k(e,t),g(e,[{key:"setOptions",value:function(t){t.style=t.style||{},t.style=Object.assign({},t.style),b(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"setOptions",this).call(this,t)}},{key:"getInputType",value:function(){return"checkbox"}},{key:"getValue",value:function(){return this.node.checked}},{key:"setValue",value:function(t){this.node.checked=t}}]),e}(D.Input),D.CheckboxInput.domAttributesMap=r(D.Element.domAttributesMap,[["checked",{noValue:!0}]]),D.TextArea=function(t){function e(){return v(this,e),_(this,(e.__proto__||Object.getPrototypeOf(e)).apply(this,arguments))}return k(e,t),g(e,[{key:"getPrimitiveTag",value:function(){return"textarea"}},{key:"applyDOMAttributes",value:function(){b(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"applyDOMAttributes",this).call(this),this.node.readOnly=this.options.readOnly||!1}},{key:"setReadOnly",value:function(t){this.options.readOnly=t,this.node.readOnly=t}},{key:"getValue",value:function(){return this.node.value}},{key:"redraw",value:function(){b(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"redraw",this).call(this),this.options.value&&(this.node.value=this.options.value+"")}},{key:"setValue",value:function(t){this.options.value=t,this.node.value=t}}]),e}(D.Element),D.InputField=function(t){function e(){return v(this,e),_(this,(e.__proto__||Object.getPrototypeOf(e)).apply(this,arguments))}return k(e,t),g(e,[{key:"renderHTML",value:function(){}}]),e}(D.Element),D.Slider=function(t){function e(){return v(this,e),_(this,(e.__proto__||Object.getPrototypeOf(e)).apply(this,arguments))}return k(e,t),e}(D.Element),D.Select=function(t){function e(){return v(this,e),_(this,(e.__proto__||Object.getPrototypeOf(e)).apply(this,arguments))}return k(e,t),g(e,[{key:"getPrimitiveTag",value:function(){return"select"}},{key:"renderHTML",value:function(){this.givenOptions=this.options.options||[];for(var t=[],e=0;e<this.givenOptions.length;e+=1){var i={key:e};this.givenOptions[e]==this.options.selected&&(i.selected=!0),t.push(D.createElement("option",i,this.givenOptions[e].toString()))}return t}},{key:"get",value:function(){var t=this.getIndex();return this.givenOptions[t]}},{key:"set",value:function(t){for(var e=0;e<this.givenOptions.length;e++)if(this.givenOptions[e]===t)return void this.setIndex(e);console.error("Can't set the select option ",t,"\nAvailable options: ",this.givenOptions)}},{key:"getIndex",value:function(){return this.node.selectedIndex}},{key:"setIndex",value:function(t){this.node.selectedIndex=t,this.options.selected=this.givenOptions[t]}},{key:"redraw",value:function(){b(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"redraw",this).call(this),this.options.selected&&this.set(this.options.selected)}}]),e}(D.Element),D.DividerBar=function(t){function e(t){v(this,e);var i=_(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t));return i.orientation=i.options.orientation||D.Orientation.HORIZONTAL,i}return k(e,t),g(e,[{key:"getDOMAttributes",value:function(){var t=b(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"getDOMAttributes",this).call(this);return this.orientation===D.Orientation.VERTICAL?(t.addClass("sectionDividerHorizontal"),t.setStyle("width","100%")):this.orientation===D.Orientation.HORIZONTAL&&(t.addClass("sectionDividerVertical"),t.setStyle("height","100%"),t.setStyle("display","inline-block")),t}},{key:"renderHTML",value:function(){return this.orientation===D.Orientation.VERTICAL?[D.createElement("div",{style:{height:"3px",width:"100%"}}),D.createElement("div",{style:{height:"2px",width:"100%",background:"#DDD"}}),D.createElement("div",{style:{height:"3px",width:"100%"}})]:[D.createElement("div",{style:{width:"3px",display:"inline-block"}}),D.createElement("div",{style:{width:"2px",height:"100%",background:"#DDD",display:"inline-block"}}),D.createElement("div",{style:{width:"3px",display:"inline-block"}})]}}]),e}(D.Element),D.SectionDivider=function(t){function e(t){v(this,e);var i=_(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t));return i.orientation=i.options.orientation||D.Orientation.VERTICAL,i.childrenSize=0,i.uncollapsedSizes=new WeakMap,i}return k(e,t),g(e,[{key:"hideBars",value:function(){for(var t=0;t<this.dividers;t+=1)this["divider"+t].addClass("hidden")}},{key:"showBars",value:function(){for(var t=0;t<this.dividers;t+=1)this["divider"+t].removeClass("hidden")}},{key:"reverse",value:function(){this.options.children.reverse();for(var t=0;t<this.children.length-1;t+=1)this.node.insertBefore(this.children[t].node,this.node.firstChild);this.children.reverse()}},{key:"getDimension",value:function(t){return this.orientation===D.Orientation.HORIZONTAL?t.getWidth():t.getHeight()}},{key:"setDimension",value:function(t,e){this.orientation===D.Orientation.HORIZONTAL?t.setWidth(e):t.setHeight(e)}},{key:"getMinDimension",value:function(t){return this.orientation===D.Orientation.HORIZONTAL&&t.options.hasOwnProperty("minWidth")?t.options.minWidth:this.orientation===D.Orientation.VERTICAL&&t.options.hasOwnProperty("minHeight")?t.options.minHeight:100/(this.children.length-1)/4}},{key:"collapseChild",value:function(t){var e=this.getDimension(this),i=this.children[2*t],n=this.getDimension(i);this.uncollapsedSizes.set(i,n);var o=0;if(0!==n){for(var r=0;r<this.children.length-1;r+=2)0===this.getDimension(this.children[r])||this.children[r].hasOwnProperty("fixed")||(o+=1);o-=1,this.setDimension(i,"0%"),i.options.collapsed=!0,i.hide();for(var s=0;s<this.children.length-1;s+=2)0===this.getDimension(this.children[s])||this.children[s].hasOwnProperty("fixed")||(this.setDimension(this.children[s],100*(this.getDimension(this.children[s])+n/o)/e+"%"),this.children[s].dispatch("resize"))}}},{key:"expandChild",value:function(t){var e=this.getDimension(this),i=this.children[2*t],n=this.getDimension(i),o=0;if(0===n){for(var r=0;r<this.children.length-1;r+=2)0===this.getDimension(this.children[r])||this.children[r].hasOwnProperty("fixed")||(o+=1);o+=1,n=this.uncollapsedSizes.get(i),i.options.collapsed=!1,i.show();for(var s=0;s<this.children.length-1;s+=2)0===this.getDimension(this.children[s])||this.children[s].hasOwnProperty("fixed")||(this.setDimension(this.children[s],100*(this.getDimension(this.children[s])-n/(o-1))/e+"%"),this.children[s].dispatch("resize"));this.setDimension(i,100*n/e+"%")}}},{key:"toggleChild",value:function(t){var e=this.getDimension(this.children[2*t]);e?this.collapseChild(t):this.expandChild(t)}},{key:"recalculateDimensions",value:function(){for(var t=this.getDimension(this),e=0,i=0,n=void 0,o=0;o<this.children.length-1;o+=2)o+1<this.children.length-1&&(e+=this.getDimension(this.children[o+1])),i+=this.getDimension(this.children[o]);i+=1,n=(t-e)/t;for(var r=0;r<this.children.length-1;r+=2){var s=100*this.getDimension(this.children[r])*n/i+"%";this.setDimension(this.children[r],s)}}},{key:"onMount",value:function(){var t=this;if(this.options.noDividers)for(var e=0;e<this.dividers;e+=1)this.setDimension(this["divider"+e],0);else for(var i=function(e){var i=function(i){for(var n=2*e,o=t.children[n];n&&(o.options.fixed||o.options.collapsed);)n-=2,o=t.children[n];for(var r=2*e+2,s=t.children[r];r+2<t.children.length-1&&(s.options.fixed||s.options.collapsed);)r+=2,s=t.children[r];o.show(),s.show(),o.dispatch("resize"),s.dispatch("resize");var a=t.getDimension(t),l=100*t.getDimension(o)/t.getDimension(t),u=100*t.getDimension(s)/t.getDimension(t),h=t.getMinDimension(o),c=t.getMinDimension(s),p=W.getEventX(i),d=W.getEventY(i),f=function(t){document.body.style["-webkit-user-select"]=t,document.body.style["-moz-user-select"]=t,
document.body.style["-ms-user-select"]=t,document.body.style["-o-user-select"]=t,document.body.style["user-select"]=t},y=function(e){var i=void 0;t.orientation===D.Orientation.HORIZONTAL?i=W.getEventX(e)-p:t.orientation===D.Orientation.VERTICAL&&(i=W.getEventY(e)-d),u-100*i/a<c||l+100*i/a<h||(u-=100*i/a,l+=100*i/a,t.setDimension(s,u+"%"),t.setDimension(o,l+"%"),s.dispatch("resize",{width:s.getWidth(),height:s.getHeight()}),o.dispatch("resize",{width:o.getWidth(),height:o.getWidth()}),p=W.getEventX(e),d=W.getEventY(e))};f("none");var v=function(t){y(t)},g=function(t){t.preventDefault(),v(t)},m=function t(){f("text"),document.body.removeEventListener("touchmove",g),document.body.removeEventListener("touchend",t),document.body.removeEventListener("mousemove",v),document.body.removeEventListener("mouseup",t)};document.body.addEventListener("touchmove",g),document.body.addEventListener("touchend",m),document.body.addEventListener("mousemove",v),document.body.addEventListener("mouseup",m)};t["divider"+e].addDOMListener("touchstart",i),t["divider"+e].addDOMListener("mousedown",i)},n=0;n<this.dividers;n+=1)i(n);setTimeout(function(){t.recalculateDimensions()}),window.addEventListener("resize",function(){t.recalculateDimensions()})}},{key:"renderHTML",value:function(){return[this.dividedChildren(),D.createElement(D.StyleElement,null,D.createElement(D.StyleInstance,{selector:".sectionDividerHorizontal:hover",attributes:{cursor:"row-resize"}}),D.createElement(D.StyleInstance,{selector:".sectionDividerVertical:hover",attributes:{cursor:"col-resize"}}))]}},{key:"redraw",value:function(){if(b(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"redraw",this).call(this),this.orientation===D.Orientation.HORIZONTAL)for(var t=0;t<this.children.length-1;t+=2)this.children[t].setStyle("vertical-align","top")}},{key:"dividedChildren",value:function(){var t=[];this.dividers=0;var e=!0,i=!1,n=void 0;try{for(var o,r=this.options.children[Symbol.iterator]();!(e=(o=r.next()).done);e=!0){var s=o.value;t.length>0&&(t.push(D.createElement(D.DividerBar,{ref:"divider"+this.dividers,orientation:this.orientation})),this.dividers+=1),t.push(s)}}catch(t){i=!0,n=t}finally{try{!e&&r.return&&r.return()}finally{if(i)throw n}}return t}}]),e}(D.Element),D.TableRow=function(t){function e(){return v(this,e),_(this,(e.__proto__||Object.getPrototypeOf(e)).apply(this,arguments))}return k(e,t),g(e,[{key:"getPrimitiveTag",value:function(){return"tr"}},{key:"renderHTML",value:function(){var t=[],e=!0,i=!1,n=void 0;try{for(var o,r=this.options.columns[Symbol.iterator]();!(e=(o=r.next()).done);e=!0){var s=o.value;t.push(this.renderEntryCell(s))}}catch(t){i=!0,n=t}finally{try{!e&&r.return&&r.return()}finally{if(i)throw n}}return t}},{key:"renderEntryCell",value:function(t){return D.createElement("td",{style:t.cellStyle,key:t.id},t.value(this.options.entry,this.options.index))}}]),e}(D.Element),D.TableRowInCollapsibleTable=function(t){function e(){return v(this,e),_(this,(e.__proto__||Object.getPrototypeOf(e)).apply(this,arguments))}return k(e,t),g(e,[{key:"getPrimitiveTag",value:function(){return"tbody"}},{key:"renderHTML",value:function(){return D.createElement("tr",null,b(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"renderHTML",this).call(this))}}]),e}(D.TableRow),D.CollapsibleTableRow=function(t){function e(t){v(this,e);var i=_(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t));return null!=t.collapsed?i.collapsed=t.collapsed:i.collapsed=!0,i}return k(e,t),g(e,[{key:"getPrimitiveTag",value:function(){return"tbody"}},{key:"onMount",value:function(){var t=this;this.collapseButton.addClickListener(function(e){t.collapsed=1!=t.collapsed,t.collapseButton.toggleClass("collapsed"),t.collapsible.element.collapse("toggle")})}},{key:"redraw",value:function(){return!!b(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"redraw",this).call(this)&&(this.collapsed?(this.collapseButton.addClass("collapsed"),this.collapsible.removeClass("in")):(this.collapseButton.removeClass("collapsed"),this.collapsible.addClass("in")),!0)}},{key:"renderHTML",value:function(){var t={padding:0},i=b(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"renderHTML",this).call(this);return[D.createElement("tr",{className:"panel-heading"},i),D.createElement("tr",null,D.createElement("td",{style:t,colspan:this.options.columns.length},D.createElement("div",{ref:"collapsible",className:"collapse"},this.renderCollapsible(this.options.entry))))]}}]),e}(D.TableRow),D.Table=function(t){function e(){return v(this,e),_(this,(e.__proto__||Object.getPrototypeOf(e)).apply(this,arguments))}return k(e,t),g(e,[{key:"setOptions",value:function(t){b(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"setOptions",this).call(this,t),this.setColumns(t.columns||[]),this.entries=t.entries||[]}},{key:"getDOMAttributes",value:function(){var t=b(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"getDOMAttributes",this).call(this);return t.addClass("ui-table table table-stripped"),t}},{key:"getPrimitiveTag",value:function(){return"table"}},{key:"getRowClass",value:function(){return D.TableRow}},{key:"getRowOptions",value:function(t){return{entry:t,columns:this.columns}}},{key:"renderHTML",value:function(){return[D.createElement("thead",null,this.renderTableHead()),D.createElement("tbody",null,this.renderTableBody())]}},{key:"renderTableHead",value:function(){return D.createElement("tr",null,this.columns.map(this.renderHeaderCell,this))}},{key:"getEntryKey",value:function(t,e){return t.id||e}},{key:"renderTableBody",value:function(){this.rows=[];for(var t=this.getEntries(),e=0;e<t.length;e+=1){var i=t[e],n=this.getRowClass(i);this.rows.push(D.createElement(n,m({key:this.getEntryKey(i,e),index:e},this.getRowOptions(i),{parent:this})))}return this.rows}},{key:"renderHeaderCell",value:function(t){return D.createElement("th",{style:t.headerStyle,ref:"columnHeader"+t.id},this.renderColumnHeader(t))}},{key:"renderColumnHeader",value:function(t){return"function"==typeof t.headerName?t.headerName():t.headerName}},{key:"getEntries",value:function(){return this.entries||[]}},{key:"columnDefaults",value:function(t,e){t.id=e}},{key:"setColumns",value:function(t){this.columns=t;for(var e=0;e<this.columns.length;e+=1)this.columnDefaults(this.columns[e],e)}}]),e}(D.Element),D.SortableTableInterface=function(t){return function(t){function e(){return v(this,e),_(this,(e.__proto__||Object.getPrototypeOf(e)).apply(this,arguments))}return k(e,t),g(e,[{key:"setOptions",value:function(t){b(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"setOptions",this).call(this,t),this.columnSortingOrder=t.columnSortingOrder||[]}},{key:"getDOMAttributes",value:function(){var t=b(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"getDOMAttributes",this).call(this);return t.addClass("ui-sortable-table"),t}},{key:"onMount",value:function(){var t=this;b(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"onMount",this).call(this);var i=!0,n=!1,o=void 0;try{for(var r,s=function(){var e=r.value;t["columnHeader"+e.id].addClickListener(function(){t.sortByColumn(e)})},a=this.columns[Symbol.iterator]();!(i=(r=a.next()).done);i=!0)s()}catch(t){n=!0,o=t}finally{try{!i&&a.return&&a.return()}finally{if(n)throw o}}}},{key:"renderColumnHeader",value:function(t){var i={position:"absolute",right:"0px",bottom:"0px"},n=D.createElement("i",{className:"sort-icon fa fa-sort",style:i});return this.sortBy===t&&(n=this.sortDescending?D.createElement("i",{className:"sort-icon fa fa-sort-desc",style:i}):D.createElement("i",{className:"sort-icon fa fa-sort-asc",style:i})),D.createElement("div",{style:{position:"relative"}},b(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"renderColumnHeader",this).call(this,t)," ",n)}},{key:"sortByColumn",value:function(t){t===this.sortBy?this.sortDescending=1!=this.sortDescending:this.sortDescending=!0,this.sortBy=t,this.redraw()}},{key:"sortEntries",value:function(t){var e=this;if(!this.sortBy&&0===this.columnSortingOrder.length)return t;var i=function(t,e,i){if(!i)return 0;var n=i.rawValue?i.rawValue(t):i.value(t),o=i.rawValue?i.rawValue(e):i.value(e);return i.cmp(n,o)},n=t.slice();return n.sort(function(t,n){var o=void 0;if(e.sortBy&&(o=i(t,n,e.sortBy),0!==o))return e.sortDescending?-o:o;for(var r=0;r<e.columnSortingOrder.length;r+=1)if(o=i(t,n,e.columnSortingOrder[r]),e.columnSortingOrder[r].sortDescending&&(o=-o),0!==o)return o;return 0}),n}},{key:"getEntries",value:function(){return this.sortEntries(b(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"getEntries",this).call(this))}},{key:"columnDefaults",value:function(t,i){b(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"columnDefaults",this).call(this,t,i),t.hasOwnProperty("cmp")||(t.cmp=o)}}]),e}(t)},D.SortableTable=D.SortableTableInterface(D.Table),D.CollapsibleTableInterface=function(t){return function(t){function e(){return v(this,e),_(this,(e.__proto__||Object.getPrototypeOf(e)).apply(this,arguments))}return k(e,t),g(e,[{key:"setOptions",value:function(t){b(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"setOptions",this).call(this,t),t.renderCollapsible&&(this.renderCollapsible=t.renderCollapsible)}},{key:"renderHTML",value:function(){return[D.createElement("thead",null,this.renderTableHead()),this.renderTableBody()]}},{key:"getRowClass",value:function(){return D.CollapsibleTableRow}},{key:"getDOMAttributes",value:function(){var t=b(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"getDOMAttributes",this).call(this);return t.addClass("ui-collapsible-table"),t}},{key:"setColumns",value:function(t){var i=this,n={value:function(t){var e=i.getRowClass(t);return e===D.CollapsibleTableRow||e.prototype instanceof D.CollapsibleTableRow?D.createElement("a",{ref:"collapseButton",className:"rowCollapseButton collapsed"}):D.createElement("a",{ref:"collapseButton"})},cellStyle:{width:"1%",whiteSpace:"nowrap"}};b(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"setColumns",this).call(this,[n].concat(t))}}]),e}(t)},D.CollapsibleTable=D.CollapsibleTableInterface(D.Table);var z=1e-6,G=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:z;return Math.abs(t)<e},q=function(t,e){var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:z;return G(t-e,i)},U=function(t,e,i){return i=i||{x:0,y:0},(t.x-i.x)*(e.y-i.y)-(t.y-i.y)*(e.x-i.x)},Y=function(t,e,i){return i=i||{x:0,y:0},{x:e*Math.cos(t)+i.x,y:e*Math.sin(t)+i.y}},X={aliceblue:"#f0f8ff",antiquewhite:"#faebd7",aqua:"#00ffff",aquamarine:"#7fffd4",azure:"#f0ffff",beige:"#f5f5dc",bisque:"#ffe4c4",black:"#000000",blanchedalmond:"#ffebcd",blue:"#0000ff",blueviolet:"#8a2be2",brown:"#a52a2a",burlywood:"#deb887",cadetblue:"#5f9ea0",chartreuse:"#7fff00",chocolate:"#d2691e",coral:"#ff7f50",cornflowerblue:"#6495ed",cornsilk:"#fff8dc",crimson:"#dc143c",cyan:"#00ffff",darkblue:"#00008b",darkcyan:"#008b8b",darkgoldenrod:"#b8860b",darkgray:"#a9a9a9",darkgreen:"#006400",darkkhaki:"#bdb76b",darkmagenta:"#8b008b",darkolivegreen:"#556b2f",darkorange:"#ff8c00",darkorchid:"#9932cc",darkred:"#8b0000",darksalmon:"#e9967a",darkseagreen:"#8fbc8f",darkslateblue:"#483d8b",darkslategray:"#2f4f4f",darkturquoise:"#00ced1",darkviolet:"#9400d3",deeppink:"#ff1493",deepskyblue:"#00bfff",dimgray:"#696969",dodgerblue:"#1e90ff",firebrick:"#b22222",floralwhite:"#fffaf0",forestgreen:"#228b22",fuchsia:"#ff00ff",gainsboro:"#dcdcdc",ghostwhite:"#f8f8ff",gold:"#ffd700",goldenrod:"#daa520",gray:"#808080",green:"#008000",greenyellow:"#adff2f",honeydew:"#f0fff0",hotpink:"#ff69b4",indianred:"#cd5c5c",indigo:"#4b0082",ivory:"#fffff0",khaki:"#f0e68c",lavender:"#e6e6fa",lavenderblush:"#fff0f5",lawngreen:"#7cfc00",lemonchiffon:"#fffacd",lightblue:"#add8e6",lightcoral:"#f08080",lightcyan:"#e0ffff",lightgoldenrodyellow:"#fafad2",lightgray:"#d3d3d3",lightgreen:"#90ee90",lightpink:"#ffb6c1",lightsalmon:"#ffa07a",lightseagreen:"#20b2aa",lightskyblue:"#87cefa",lightslategray:"#778899",lightsteelblue:"#b0c4de",lightyellow:"#ffffe0",lime:"#00ff00",limegreen:"#32cd32",linen:"#faf0e6",magenta:"#ff00ff",maroon:"#800000",mediumaquamarine:"#66cdaa",mediumblue:"#0000cd",mediumorchid:"#ba55d3",mediumpurple:"#9370db",mediumseagreen:"#3cb371",mediumslateblue:"#7b68ee",mediumspringgreen:"#00fa9a",mediumturquoise:"#48d1cc",mediumvioletred:"#c71585",midnightblue:"#191970",mintcream:"#f5fffa",mistyrose:"#ffe4e1",moccasin:"#ffe4b5",navajowhite:"#ffdead",navy:"#000080",oldlace:"#fdf5e6",olive:"#808000",olivedrab:"#6b8e23",orange:"#ffa500",orangered:"#ff4500",orchid:"#da70d6",palegoldenrod:"#eee8aa",palegreen:"#98fb98",paleturquoise:"#afeeee",palevioletred:"#db7093",papayawhip:"#ffefd5",peachpuff:"#ffdab9",peru:"#cd853f",pink:"#ffc0cb",plum:"#dda0dd",powderblue:"#b0e0e6",purple:"#800080",red:"#ff0000",rosybrown:"#bc8f8f",royalblue:"#4169e1",saddlebrown:"#8b4513",salmon:"#fa8072",sandybrown:"#f4a460",seagreen:"#2e8b57",seashell:"#fff5ee",sienna:"#a0522d",silver:"#c0c0c0",skyblue:"#87ceeb",slateblue:"#6a5acd",slategray:"#708090",snow:"#fffafa",springgreen:"#00ff7f",steelblue:"#4682b4",tan:"#d2b48c",teal:"#008080",thistle:"#d8bfd8",tomato:"#ff6347",turquoise:"#40e0d0",violet:"#ee82ee",wheat:"#f5deb3",white:"#ffffff",whitesmoke:"#f5f5f5",yellow:"#ffff00",yellowgreen:"#9acd32"},J=function(){function t(){v(this,t)}return g(t,null,[{key:"parseColor",value:function(t){t=t.trim().toLowerCase(),X.hasOwnProperty(t)&&(t=X[t]);var e=t.match(/^#([0-9a-f]{3})$/i);if(e)return[17*parseInt(e[1].charAt(0),16),17*parseInt(e[1].charAt(1),16),17*parseInt(e[1].charAt(2),16),1];var i=t.match(/^#([0-9a-f]{6})$/i);if(i)return[parseInt(i[1].substr(0,2),16),parseInt(i[1].substr(2,2),16),parseInt(i[1].substr(4,2),16),1];var n=t.match(/^rgba\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+.*\d*)\s*\)$/i);if(n)return[parseInt(n[1]),parseInt(n[2]),parseInt(n[3]),parseFloat(n[4])];var o=t.match(/^rgb\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*\)$/i);return o?[parseInt(o[1]),parseInt(o[2]),parseInt(o[3]),1]:void 0}},{key:"buildRGBA",value:function(t){return"rgba("+t[0]+","+t[1]+","+t[2]+","+t[3]+")"}},{key:"interpolate",value:function(e,i,n){var o=t.parseColor(e),r=t.parseColor(i);return t.buildRGBA([parseInt(o[0]*(1-n)+r[0]*n),parseInt(o[1]*(1-n)+r[1]*n),parseInt(o[2]*(1-n)+r[2]*n),o[3]*(1-n)+r[3]*n])}}]),t}(),K=function(){function t(e){v(this,t),this.func=e.func,this.context=e.context,this.duration=e.duration||0,this.startTime=e.startTime||0,this.dependsOn=e.dependsOn||[],this.speedFactor=1}return g(t,[{key:"hasDependencyOn",value:function(t){var e=!0,i=!1,n=void 0;try{for(var o,r=this.dependsOn[Symbol.iterator]();!(e=(o=r.next()).done);e=!0){var s=o.value;if(s===t)return!0}}catch(t){i=!0,n=t}finally{try{!e&&r.return&&r.return()}finally{if(i)throw n}}return!1}},{key:"canAdvance",value:function(){for(var t=0;t<this.dependsOn.length;t+=1)if(!this.dependsOn[t].isStopped())return!1;return!0}},{key:"getFraction",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Date.now();return Math.min((t-this.startTime)/this.getLength(),1)}},{key:"start",value:function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Date.now();this.stopped&&delete this.stopped,this.setStartTime(e);var i=function e(){t.stopped||(t.pauseTime||t.nextStep(),requestAnimationFrame(e))};return requestAnimationFrame(i),this}},{key:"getLength",value:function(){return this.getEndTime()-this.startTime}},{key:"setStartTime",value:function(t){return this.startTime=t,this}},{key:"setSpeedFactor",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Date.now(),i=t/this.speedFactor;return this.startTime=(this.startTime-e)/i+e,this.pauseTime&&(this.pauseTime=(this.pauseTime-e)/i+e),this.speedFactor=t,this}},{key:"pause",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Date.now();return this.pauseTime||(this.pauseTime=t),this}},{key:"resume",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Date.now();return this.pauseTime&&(this.startTime+=t-this.pauseTime,this.pauseTime=0),this}},{key:"forceStart",value:function(){return this.restart(),this.func(0,this.context),this}},{key:"forceFinish",value:function(){return this.func(1,this.context),this.stop(),this}},{key:"stop",value:function(){this.stopped=!0}},{key:"restart",value:function(){return delete this.stopped,this}},{key:"isStopped",value:function(){return this.stopped===!0}},{key:"nextStep",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Date.now();return this.isStopped()?this:(this.lastT=this.getFraction(t),this.lastT<0?this:(this.func(this.lastT,this.context),1===this.lastT&&this.stop(),this))}},{key:"getEndTime",value:function(){return this.startTime+this.duration/this.speedFactor}}]),t}();(function(t){function e(t){v(this,e);var i=_(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t));return i.reverseFunc=t.reverseFunc,i.context=t.context,i}return k(e,t),g(e,[{key:"forceStart",value:function(){return this.restart(),this.reverseFunc(this.context),this}},{key:"forceFinish",value:function(){return this.func(this.context),this.stop(),this}},{key:"nextStep",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Date.now();return this.isStopped()?this:(t>=this.startTime&&(this.func(this.context),this.stop()),this)}},{key:"getEndTime",value:function(){return this.startTime}}]),e})(K),function(){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;v(this,t),this.startTime=e,this.speedFactor=1,this.transitions=[],this.dependsOn=[]}return g(t,[{key:"add",value:function(t){for(var e=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],i=0;i<t.dependsOn.length;i+=1)t.dependsOn[i].getEndTime()>t.startTime&&console.error("A transition depends on one that ends after its start!");return e&&t.forceFinish(),this.transitions.push(t),this}},{key:"push",value:function(t){var e=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];t.setStartTime(this.getLength());for(var i=0;i<t.dependsOn.length;i+=1)t.dependsOn[i].getEndTime()>t.startTime&&console.error("A transition depends on one that ends after its start!");return e&&t.forceFinish(),this.transitions.push(t),this}},{key:"getFraction",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Date.now();return Math.min((t-this.startTime)/this.getLength(),1)}},{key:"setStartTime",value:function(t){var e=t-this.startTime;this.startTime=t;for(var i=0;i<this.transitions.length;i+=1){var n=this.transitions[i];n.setStartTime(n.startTime+e)}}},{key:"start",value:function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Date.now();this.stopped&&delete this.stopped,this.setStartTime(e);var i=function e(){t.stopped||(t.pauseTime||t.nextStep(),requestAnimationFrame(e))};return requestAnimationFrame(i),this}},{key:"stop",value:function(){this.stopped=!0;for(var t=0;t<this.transitions.length;t+=1){var e=this.transitions[t];e.stop()}}},{key:"isStopped",value:function(){return this.stopped===!0}},{key:"pause",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Date.now();if(!this.pauseTime){this.pauseTime=t;for(var e=0;e<this.transitions.length;e+=1)this.transitions[e].pause(t)}return this}},{key:"resume",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Date.now();if(this.pauseTime){this.startTime+=t-this.pauseTime;for(var e=0;e<this.transitions.length;e+=1)this.transitions[e].resume(t);this.pauseTime=0}return this}},{key:"nextStep",value:function(){if(!this.isStopped()){this.onNewFrame&&this.onNewFrame(this.getFraction());for(var t=!0,e=[],i=0;i<this.transitions.length;i+=1){var n=this.transitions[i];if(!n.isStopped()){if(n.canAdvance())for(n.nextStep();0!==e.length&&this.transitions[e[e.length-1]].canAdvance();)this.transitions[e[e.length-1]].nextStep(),e.pop();else e.push(i);t=!1}}return t&&this.stop(),this}}},{key:"setSpeedFactor",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Date.now(),i=t/this.speedFactor;this.startTime=(this.startTime-e)/i+e,this.pauseTime&&(this.pauseTime=(this.pauseTime-e)/i+e),this.speedFactor=t;for(var n=0;n<this.transitions.length;n+=1)this.transitions[n].setSpeedFactor(t,e);return this}},{key:"restart",value:function(){delete this.stopped;for(var t=0;t<this.transitions.length;t+=1){var e=this.transitions[t];e.restart()}return this.sortByEndTime(),this}},{key:"getLength",value:function(){return this.getEndTime()-this.startTime}},{key:"getEndTime",value:function(){for(var t=0,e=0;e<this.transitions.length;e+=1){var i=this.transitions[e].getEndTime();i>t&&(t=i)}return t}},{key:"hasDependencyOn",value:function(t){for(var e in this.dependsOn)if(e===t)return!0;return!1}},{key:"canAdvance",value:function(){for(var t=0;t<this.dependsOn.length;t+=1)if(!this.dependsOn[t].isStopped())return!1;return!0}},{key:"sortByStartTime",value:function(){this.transitions.sort(function(t,e){return q(t.startTime,e.startTime,.001)?q(t.getEndTime(),e.getEndTime(),.001)?t.hasDependencyOn(e)?1:e.hasDependencyOn(t)?-1:0:e.getEndTime()-t.getEndTime():e.startTime-t.startTime})}},{key:"sortByEndTime",value:function(){this.transitions.sort(function(t,e){return q(t.getEndTime(),e.getEndTime(),.001)?q(t.startTime,e.startTime,.001)?t.hasDependencyOn(e)?-1:e.hasDependencyOn(t)?1:0:t.startTime-e.startTime:t.getEndTime()-e.getEndTime()})}},{key:"forceStart",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Date.now();this.sortByStartTime();for(var e=0;e<this.transitions.length;e+=1){var i=this.transitions[e];i.startTime<=t&&i.forceStart(t)}return this}},{key:"forceFinish",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Date.now(),i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:-1;this.sortByEndTime();for(var n=0;n<this.transitions.length;n+=1){var o=this.transitions[n];o.getEndTime()>=i&&(o instanceof t?o.forceFinish(e,i):("undefined"==typeof e||o.getEndTime()<e)&&o.forceFinish())}return this}},{key:"startAtPercent",value:function(t){var e=this,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Date.now();cancelAnimationFrame(this.animationFrameId),this.restart();var n=this.pauseTime;n&&this.resume(),this.forceStart(i),this.setStartTime(i-t*this.getLength()),this.forceFinish(i),this.nextStep(),this.nextStep(),n&&this.pause();var o=function t(){e.isStopped()||(e.pauseTime||e.nextStep(),e.animationFrameId=requestAnimationFrame(t))};this.animationFrameId=requestAnimationFrame(o)}}]),t}();D.SVG={};var Z=["width","height","rx","ry","cx","cy","x","y"];D.SVG.Element=function(t){function e(){return v(this,e),_(this,(e.__proto__||Object.getPrototypeOf(e)).apply(this,arguments))}return k(e,t),g(e,[{key:"createNode",value:function(){return this.node=document.createElementNS("http://www.w3.org/2000/svg",this.getPrimitiveTag()),this.node}},{key:"setOptions",value:function(t){if(t.hasOwnProperty("style")){var i=!0,n=!1,o=void 0;try{for(var r,s=Z[Symbol.iterator]();!(i=(r=s.next()).done);i=!0){var a=r.value;t.style.hasOwnProperty(a)&&!t.hasOwnProperty(a)&&(t[a]=t.style[a])}}catch(t){n=!0,o=t}finally{try{!i&&s.return&&s.return()}finally{if(n)throw o}}}if(this.constructor.getDefaultOptions){var l=this.constructor.getDefaultOptions();t=$.extend(!0,{},l,t)}b(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"setOptions",this).call(this,t)}},{key:"saveState",value:function(){var t={};return t.options=$.extend(!0,{},this.options),t}},{key:"setStyle",value:function(t,i){b(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"setStyle",this).call(this,t,i),t in Z&&(this.options[t]=i,this.setAttribute(t,i),this.redraw())}},{key:"setState",value:function(t){this.setOptions(t.options)}},{key:"getDOMAttributes",value:function(){var t=b(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"getDOMAttributes",this).call(this);t.classes=null;var i=this.getTransform();return i&&t.setAttribute("transform",i),t}},{key:"getTransform",value:function(){return this.options.transform?this.options.transform:this.options.translate?this.options.translate:null}},{key:"translate",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;this.options.translate="translate("+t+","+e+")"}},{key:"getHashCode",value:function(){return this.uniqueId()}},{key:"getBoundingClientRect",value:function(){for(var t=this.node,e=0,i=0;t&&t!==document.body;)e-=t.scrollLeft,i-=t.scrollTop,t=t.offsetParent||t.parentNode;t&&(e-=t.scrollLeft,i-=t.scrollTop);var n=this.node.getBoundingClientRect();return{top:n.top-i,left:n.left-e,width:n.width,bottom:n.bottom-i,height:n.height,right:n.right-e}}},{key:"getBBox",value:function(){return this.node.getBBox()}},{key:"getHeight",value:function(){return this.getBoundingClientRect().height}},{key:"getWidth",value:function(){return this.getBoundingClientRect().width}},{key:"toFront",value:function(){}},{key:"toBack",value:function(){}},{key:"setOpacity",value:function(t){this.options.opacity=t,this.node&&this.node.setAttribute("opacity",t)}},{key:"setColor",value:function(t){this.options.color=t,this.node&&(this.node.setAttribute("stroke",t),this.node.setAttribute("fill",t))}},{key:"blinkTransition",value:function(t){var e=this,i={duration:2e3,times:2,firstColor:"grey",secondColor:"black",executeLastStep:!0,startTime:0,dependsOn:[]};return Object.assign(i,t),new K({func:function(t,i){t>1-i.interval&&!i.executeLastStep?e.setColor(i.firstColor):e.setColor(Math.floor((1-t)/i.interval)%2===1?i.firstColor:i.secondColor)},context:{firstColor:i.firstColor,secondColor:i.secondColor,interval:1/(2*i.times),executeLastStep:i.executeLastStep},duration:i.duration,startTime:i.startTime,dependsOn:i.dependsOn})}},{key:"changeOpacityTransition",value:function(t,e){var i=this,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0;return this.options.hasOwnProperty("opacity")||(this.options.opacity=1),new K({func:function(e,n){i.setOpacity((1-e)*n.opacity+e*t)},context:{opacity:this.options.opacity},duration:e,startTime:o,dependsOn:n})}},{key:"changeColorTransition",value:function(t,e){var i=this,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0;return new K({func:function(e,n){i.setColor(J.interpolate(n.color,t,e))},context:{color:this.getColor()},duration:e,startTime:o,dependsOn:n})}},{key:"remove",value:function(){}},{key:"getSvg",value:function(){return this.parent.getSvg()}},{key:"getRaphael",value:function(){return this.hasOwnProperty("_raphael")||(this._raphael=this.createRaphael(),this._raphael.node.remove(),this._raphael.node=this.node),this._raphael}},{key:"getSnap",value:function(){return this.hasOwnProperty("_snap")||(this._snap=this.createSnap(),this._snap.node.remove(),this._snap.node=this.node),this._snap}}]),e}(D.Element),D.SVG.Element.domAttributesMap=r(D.Element.domAttributesMap,[["fill"],["height"],["opacity"],["stroke"],["strokeWidth",{domName:"stroke-width"}],["clipPath",{domName:"clip-path"}],["transform"],["width"],["cx"],["cy"],["rx"],["ry"],["x"],["y"],["offset"],["stopColor",{domName:"stop-color"}],["strokeDasharray",{domName:"stroke-dasharray"}],["strokeLinecap",{domName:"stroke-linecap"}]]),D.SVG.SVGRoot=function(t){function e(){return v(this,e),_(this,(e.__proto__||Object.getPrototypeOf(e)).apply(this,arguments))}return k(e,t),g(e,[{key:"getPrimitiveTag",value:function(){return"svg"}},{key:"getSnap",value:function(){return Snap(this.node)}},{key:"getSvg",value:function(){return this}}]),e}(D.SVG.Element),D.SVG.RawSVG=function(t){function e(){return v(this,e),_(this,(e.__proto__||Object.getPrototypeOf(e)).apply(this,arguments))}return k(e,t),g(e,[{key:"redraw",value:function(){b(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"redraw",this).call(this),this.node.innerHTML=this.options.innerHTML}}]),e}(D.SVG.SVGRoot),D.SVG.Group=function(t){function e(){return v(this,e),_(this,(e.__proto__||Object.getPrototypeOf(e)).apply(this,arguments))}return k(e,t),g(e,[{key:"getPrimitiveTag",value:function(){return"g"}},{key:"setColor",value:function(t){for(var e=0;e<this.children.length;e+=1)this.children[e].setColor(t)}}]),e}(D.SVG.Element),D.SVG.Defs=function(t){function e(){return v(this,e),_(this,(e.__proto__||Object.getPrototypeOf(e)).apply(this,arguments))}return k(e,t),g(e,[{key:"getPrimitiveTag",value:function(){return"defs"}}]),e}(D.SVG.Element),D.SVG.ClipPath=function(t){function e(){return v(this,e),_(this,(e.__proto__||Object.getPrototypeOf(e)).apply(this,arguments))}return k(e,t),g(e,[{key:"getPrimitiveTag",value:function(){return"clipPath"}}]),e}(D.SVG.Element),D.SVG.Path=function(t){function e(){return v(this,e),_(this,(e.__proto__||Object.getPrototypeOf(e)).apply(this,arguments))}return k(e,t),g(e,[{key:"getPrimitiveTag",value:function(){return"path"}},{key:"getDOMAttributes",value:function(){var t=b(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"getDOMAttributes",this).call(this);return t.setAttribute("d",this.getPath()),t}},{key:"createSnap",value:function(){return this.getSvg().getSnap().path()}},{key:"getPath",value:function(){return this.options.d}},{key:"setPath",value:function(t){this.options.d=t,this.node.setAttribute("d",this.options.d)}},{key:"getLength",value:function(){return this.node.getTotalLength()}},{key:"getPointAtLength",value:function(t){return this.node.getPointAtLength(t)}}],[{key:"getDefaultOptions",value:function(){return{d:""}}}]),e}(D.SVG.Element),D.SVG.Circle=function(t){function e(){return v(this,e),_(this,(e.__proto__||Object.getPrototypeOf(e)).apply(this,arguments))}return k(e,t),g(e,[{key:"getPrimitiveTag",value:function(){return"circle"}},{key:"getDOMAttributes",value:function(){var t=b(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"getDOMAttributes",this).call(this);return t.setAttribute("r",this.options.radius),t.setAttribute("cx",this.options.center.x),t.setAttribute("cy",this.options.center.y),t}},{key:"getRadius",value:function(){return this.options.radius}},{key:"setRadius",value:function(t){this.options.radius=t,this.setAttribute("r",t)}},{key:"setCenter",value:function(t,e){this.options.center.x=t,this.options.center.y=e,this.setAttribute("cx",t),this.setAttribute("cy",e)}},{key:"getCenter",value:function(){return this.options.center}},{key:"toPath",value:function(){var t=this.options.radius,e=this.options.center.x,i=this.options.center.y,n="M"+(e-t)+" "+i+"a"+t+" "+t+" 0 0 1 "+t+" "+-t+"a"+t+" "+t+" 0 0 1 "+t+" "+t+"a"+t+" "+t+" 0 0 1 "+-t+" "+t+"a"+t+" "+t+" 0 0 1 "+-t+" "+-t;return new D.SVG.Path({d:n})}}],[{key:"getDefaultOptions",value:function(){return{radius:0,center:{x:0,y:0}}}}]),e}(D.SVG.Element),D.SVG.HandDrawnCircle=function(t){function e(){return v(this,e),_(this,(e.__proto__||Object.getPrototypeOf(e)).apply(this,arguments))}return k(e,t),g(e,[{key:"getPrimitiveTag",value:function(){return"path"}},{key:"setParameters",value:function(t){Object.assign(this.options,t),this.setAttribute("d",this.getPath()),this.setAttribute("transform",this.getTransform())}},{key:"setCenter",value:function(t,e){this.options.x=t,this.options.y=e,this.setAttribute("transform",this.getTransform())}},{key:"setRadius",value:function(t){this.options.r=t,this.setAttribute("d",this.getPath())}},{key:"getDOMAttributes",value:function(){var t=b(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"getDOMAttributes",this).call(this);return t.setAttribute("d",this.getPath()),t.setAttribute("transform",this.getTransform()),t}},{key:"getPath",value:function(){var t=this.options.r,e=this.options.minDeltaR,i=this.options.maxDeltaR,n=this.options.minStartingAngle,o=this.options.maxStartingAngle,r=this.options.minOverlap,s=this.options.maxOverlap,a=.551915024494,l=Math.atan(a),u=Math.sqrt(a*a+1),h=(n+Math.random()*(o-n))*Math.PI/180,c="M"+[t*Math.sin(h),t*Math.cos(h)];c+=" C"+[u*t*Math.sin(h+l),u*t*Math.cos(h+l)];
for(var p=0;p<4;p+=1){var d=r+Math.random()*(s-r);h+=Math.PI/2*(1+d),t*=1+e+Math.random()*(i-e),c+=" "+(p?"S":"")+[u*t*Math.sin(h-l),u*t*Math.cos(h-l)],c+=" "+[t*Math.sin(h),t*Math.cos(h)]}return c}},{key:"getTransform",value:function(){var t=this.options.minSquash,e=this.options.maxSquash,i=this.options.minSquashAngle,n=this.options.maxSquashAngle,o=i+Math.random()*(n-i),r=t+Math.random()*(e-t);return"translate("+[this.options.x,this.options.y]+") rotate("+o+") scale(1, "+r+") rotate("+-o+")"}}],[{key:"getDefaultOptions",value:function(){return{minDeltaR:.1,maxDeltaR:.1,minStartingAngle:0,maxStartingAngle:0,minOverlap:.15,maxOverlap:.15,minSquash:.7,maxSquash:.7,minSquashAngle:150,maxSquashAngle:150,r:19,x:0,y:0,fill:"transparent",stroke:"black",strokeWidth:"2px"}}}]),e}(D.SVG.Element),D.SVG.Ellipse=function(t){function e(){return v(this,e),_(this,(e.__proto__||Object.getPrototypeOf(e)).apply(this,arguments))}return k(e,t),g(e,[{key:"getPrimitiveTag",value:function(){return"ellipse"}},{key:"getDOMAttributes",value:function(){var t=b(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"getDOMAttributes",this).call(this);return t.setAttribute("rx",this.options.rx),t.setAttribute("ry",this.options.ry),t}}]),e}(D.SVG.Element),D.SVG.CircleArc=function(t){function e(){return v(this,e),_(this,(e.__proto__||Object.getPrototypeOf(e)).apply(this,arguments))}return k(e,t),g(e,[{key:"getPath",value:function(){var t,e,i=this.options.startAngle,n=this.options.endAngle,o=this.options.radius,r=this.options.center,s=n-i+(n<i?2*Math.PI:0),a=Y(i,o,r),l=Y(n,o,r);return s<=Math.PI?(e=0,t=U(a,l,r)<=0?0:1):(e=1,t=U(a,l,r)<=0?1:0),"M "+a.x+" "+a.y+" A "+o+" "+o+" 0 "+e+" "+t+" "+l.x+" "+l.y}}]),e}(D.SVG.Path),D.SVG.Rect=function(t){function e(){return v(this,e),_(this,(e.__proto__||Object.getPrototypeOf(e)).apply(this,arguments))}return k(e,t),g(e,[{key:"getPrimitiveTag",value:function(){return"rect"}},{key:"getDOMAttributes",value:function(){var t=b(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"getDOMAttributes",this).call(this);return t.setAttribute("x",this.options.x),t.setAttribute("y",this.options.y),t.setAttribute("rx",this.options.rx),t.setAttribute("ry",this.options.ry),t.setAttribute("width",this.options.width),t.setAttribute("height",this.options.height),t}},{key:"getX",value:function(){return this.options.x}},{key:"setX",value:function(t){this.options.x=t,this.node.setAttribute("x",this.options.x)}},{key:"getY",value:function(){return this.options.y}},{key:"setY",value:function(t){this.options.y=t,this.node.setAttribute("y",this.options.y)}},{key:"getWidth",value:function(){return this.options.width}},{key:"setWidth",value:function(t){this.options.width=t,this.node.setAttribute("width",this.options.width)}},{key:"getHeight",value:function(){return this.options.height}},{key:"setHeight",value:function(t){this.options.height=t,this.node.setAttribute("height",this.options.height)}}],[{key:"getDefaultOptions",value:function(){return{x:0,y:0,rx:0,ry:0,width:0,height:0}}}]),e}(D.SVG.Element),D.SVG.Line=function(t){function e(){return v(this,e),_(this,(e.__proto__||Object.getPrototypeOf(e)).apply(this,arguments))}return k(e,t),g(e,[{key:"getPrimitiveTag",value:function(){return"line"}},{key:"getDOMAttributes",value:function(){var t=b(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"getDOMAttributes",this).call(this);return t.setAttribute("x1",this.options.x1),t.setAttribute("y1",this.options.y1),t.setAttribute("x2",this.options.x2),t.setAttribute("y2",this.options.y2),t}},{key:"setLine",value:function(t,e,i,n){this.options.x1=t,this.options.y1=e,this.options.x2=i,this.options.y2=n,this.setAttribute("x1",t),this.setAttribute("y1",e),this.setAttribute("x2",i),this.setAttribute("y2",n)}}],[{key:"getDefaultOptions",value:function(){return{x1:0,y1:0,x2:0,y2:0,fill:"black",stroke:"black"}}}]),e}(D.SVG.Element),D.SVG.Text=function(t){function e(){return v(this,e),_(this,(e.__proto__||Object.getPrototypeOf(e)).apply(this,arguments))}return k(e,t),g(e,[{key:"getPrimitiveTag",value:function(){return"text"}},{key:"setOptions",value:function(t){b(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"setOptions",this).call(this,t),this.options.selectable||(this.options.style||(this.options.style={}),this.options.style["-webkit-user-select"]="none",this.options.style["-moz-user-select"]="none",this.options.style["-ms-user-select"]="none",this.options.style["user-select"]="none")}},{key:"getDOMAttributes",value:function(){var t=b(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"getDOMAttributes",this).call(this),i=new Map([["dx","dx"],["dy","dy"],["fontSize","font-size"],["textAnchor","text-anchor"],["style","style"]]),n=!0,o=!1,r=void 0;try{for(var s,a=i[Symbol.iterator]();!(n=(s=a.next()).done);n=!0){var l=O(s.value,2),u=l[0],h=l[1];this.options.hasOwnProperty(u)&&t.setAttribute(h,this.options[u])}}catch(t){o=!0,r=t}finally{try{!n&&a.return&&a.return()}finally{if(o)throw r}}return t.setAttribute("x",this.options.x),t.setAttribute("y",this.options.y),t}},{key:"renderHTML",value:function(){return[D.createElement(D.TextElement,{ref:"textElement",value:this.options.text+""})]}},{key:"getX",value:function(){return this.options.x}},{key:"setX",value:function(t){this.options.x=t,this.node.setAttribute("x",this.options.x)}},{key:"getY",value:function(){return this.options.y}},{key:"setY",value:function(t){this.options.y=t,this.node.setAttribute("y",this.options.y)}},{key:"setText",value:function(t){this.textElement.setValue(t+""),this.options.text=t}},{key:"getText",value:function(){return this.options.text}},{key:"setPosition",value:function(t,e){this.setX(t),this.setY(e)}},{key:"getColor",value:function(){return this.options.color}},{key:"setColor",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]&&arguments[1];this.options.color=t,this.node&&(this.node.setAttribute("fill",t),e||this.node.setAttribute("stroke",t))}},{key:"moveTransition",value:function(t,e){var i=this,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0;return new K({func:function(e,n){i.setPosition((1-e)*n.x+e*t.x,(1-e)*n.y+e*t.y)},context:{x:this.options.x,y:this.options.y},duration:e,startTime:o,dependsOn:n})}},{key:"changeFillTransition",value:function(t,e){var i=this,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0;return new K({func:function(e,n){i.setColor(J.interpolate(n.color,t,e),!0)},context:{color:this.getColor()},duration:e,startTime:o,dependsOn:n})}}],[{key:"getDefaultOptions",value:function(){return{x:0,y:0,text:"",fontSize:"15px",color:"black",dy:"0.35em",textAnchor:"middle",selectable:!1}}}]),e}(D.SVG.Element),D.SVG.Text.domAttributesMap=r(D.SVG.Element.domAttributesMap,[["fontFamily",{domName:"font-family"}]]),D.SVG.TextArea=function(t){function e(){return v(this,e),_(this,(e.__proto__||Object.getPrototypeOf(e)).apply(this,arguments))}return k(e,t),g(e,[{key:"setOptions",value:function(t){b(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"setOptions",this).call(this,t),this.rect=D.createElement(D.SVG.Rect,null),this.text=D.createElement(D.SVG.Text,null)}},{key:"getX",value:function(){return this.rect.getX()}},{key:"setX",value:function(t){this.rect.setX(t),this.text.setX(t+this.options.padding)}},{key:"getY",value:function(){return this.rect.getY()}},{key:"setY",value:function(t){this.rect.setY(t),this.text.setY(t+this.options.padding)}},{key:"getWidth",value:function(){return this.rect.getWidth()}},{key:"setWidth",value:function(t){this.rect.setWidth(t),this.redraw()}},{key:"getHeight",value:function(){return this.rect.getHeight()}},{key:"setHeight",value:function(t){this.rect.setHeight(t),this.redraw()}},{key:"renderHTML",value:function(){}}],[{key:"getDefaultOptions",value:function(){return{padding:0}}}]),e}(D.SVG.Element),D.SVG.Polygon=function(t){function e(){return v(this,e),_(this,(e.__proto__||Object.getPrototypeOf(e)).apply(this,arguments))}return k(e,t),g(e,[{key:"getDOMAttributes",value:function(){var t=b(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"getDOMAttributes",this).call(this);return t.setAttribute("d",this.getPolygonPath()),t}},{key:"getPolygonPath",value:function(){for(var t="",e=0;e<this.options.points.length;++e)t+=0==e?"M ":"L ",t+=this.options.points[e].x+" "+this.options.points[e].y+" ";return t+="Z"}},{key:"setPoints",value:function(t){this.options.points=t,this.setPath(this.getPolygonPath())}}],[{key:"getDefaultOptions",value:function(){return{points:[]}}}]),e}(D.SVG.Path),D.SVG.CSAIconPath=function(t){function e(){return v(this,e),_(this,(e.__proto__||Object.getPrototypeOf(e)).apply(this,arguments))}return k(e,t),g(e,[{key:"setOptions",value:function(t){this.options=t,this.options.x=t.x||"0",this.options.y=t.y||"0",this.options.size=t.size||45;var e=this.options.size/1646,i=.8*this.options.size/1479;this.options.d=" m "+823*e+" "+1194*i+" l "+0*e+" "+-152*i+" l "+-191*e+" "+0*i+" l "+191*e+" "+-330*i+" l "+191*e+" "+330*i+" l "+-191*e+" "+0*i+" l "+0*e+" "+152*i+" l "+257*e+" "+0*i+" l "+173*e+" "+100*i+" a "+194*e+" "+194*i+" 0 1 0 "+100*e+" "+-173*i+" l "+-173*e+" "+-100*i+" l "+-256*e+" "+-464*i+" l "+0*e+" "+-200*i+" a "+194*e+" "+194*i+" 0 1 0 "+-200*e+" "+0*i+" l "+0*e+" "+200*i+" l "+-256*e+" "+464*i+" l "+-173*e+" "+100*i+" a "+194*e+" "+194*i+" 0 1 0 "+100*e+" "+173*i+" l "+173*e+" "+-100*i+"  z",this.options.fill=t.fill||"white",this.options.stroke=t.stroke||"none"}}]),e}(D.SVG.Path),D.SVG.CSAIconSVG=function(t){function e(){return v(this,e),_(this,(e.__proto__||Object.getPrototypeOf(e)).apply(this,arguments))}return k(e,t),g(e,[{key:"setOptions",value:function(t){this.options=t,this.options.size=this.options.size||45,this.options.width=this.options.size,this.options.height=this.options.size}},{key:"renderHTML",value:function(){return[D.createElement(D.SVG.CSAIconPath,{size:this.options.size})]}}]),e}(D.SVG.SVGRoot),D.Switcher=function(t){function e(t){v(this,e);var i=_(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t));return i.childMap=new WeakMap,i}return k(e,t),g(e,[{key:"copyState",value:function(t){var e=Object.assign({},t.options,{children:this.overwriteElements(this.options.children||[],t.options.children||[])});this.setOptions(e);var i=!0,n=!1,o=void 0;try{for(var r,s=this.options.children[Symbol.iterator]();!(i=(r=s.next()).done);i=!0){var a=r.value;a.options.active&&(this.activeChild=a)}}catch(t){n=!0,o=t}finally{try{!i&&s.return&&s.return()}finally{if(n)throw o}}}},{key:"renderHTML",value:function(){return this.activeChild||this.options.children[0]}},{key:"overwriteElements",value:function(t,e){for(var i=this.getElementKeyMap(t),n=0;n<e.length;n+=1){var o=e[n],r=o.options&&o.options.key||"autokey"+n,s=i.get(r);s!==o&&s&&o.canOverwrite(s)&&(e[n]=o=this.overwriteChild(s,o))}return e}},{key:"redraw",value:function(){if(this.applyDOMAttributes(),this.applyRef(),D.renderingStack.push(this),this.renderHTML(),D.renderingStack.pop(),0!=this.options.children.length){var t=!0,e=!1,i=void 0;try{for(var n,o=this.options.children[Symbol.iterator]();!(t=(n=o.next()).done);t=!0){var r=n.value;this.options.lazyRender?(this.getChildProperties(r).isUpToDate=!1,r.applyRef()):this.updateChild(r)}}catch(t){e=!0,i=t}finally{try{!t&&o.return&&o.return()}finally{if(e)throw i}}this.updateActiveChild(this.activeChild||this.options.children[0])}}},{key:"getChildProperties",value:function(t){return this.childMap.has(t)||this.childMap.set(t,{isUpToDate:!1,isMounted:!!t.node}),this.childMap.get(t)}},{key:"updateChild",value:function(t){this.getChildProperties(t).isUpToDate||(t.node?t.redraw():t.mount(this),this.getChildProperties(t).isUpToDate=!0)}},{key:"appendChild",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return this.options.children.push(t),e&&t.mount(this),1==this.options.children.length&&this.setActive(t),t}},{key:"getActiveIndex",value:function(){return this.getChildIndex(this.activeChild)}},{key:"getActive",value:function(){return this.activeChild}},{key:"insertChildNodeBefore",value:function(t,e){var i=this.getChildProperties(t);i.isMounted=!0,i.isUpToDate=!0}},{key:"updateActiveChild",value:function(t){for(this.activeChild&&this.activeChild.dispatch("setActive",!1);this.node.firstChild;)this.node.removeChild(this.node.firstChild);this.updateChild(t),this.node.appendChild(t.node),this.children[0]=this.activeChild=t,t.dispatch("setActive",!0)}},{key:"setActive",value:function(t){this.activeChild!==t&&(this.activeChild&&this.activeChild.dispatch("hide"),this.updateActiveChild(t),this.activeChild.dispatch("show"))}},{key:"hasChild",value:function(t){return this.childMap.has(t)}},{key:"getChild",value:function(t){return this.options.children[t]}},{key:"getChildIndex",value:function(t){return this.options.children.indexOf(t)}},{key:"onMount",value:function(){var t=this;this.addListener("shouldRedrawChild",function(e){e.child.isInDOM()?e.child.redraw():t.getChildProperties(e.child).isUpToDate=!1})}}]),e}(D.Element),D.BasicTabTitle=function(t){function e(){return v(this,e),_(this,(e.__proto__||Object.getPrototypeOf(e)).apply(this,arguments))}return k(e,t),g(e,[{key:"getPrimitiveTag",value:function(){return"li"}},{key:"getDOMAttributes",value:function(){var t=b(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"getDOMAttributes",this).call(this);return this.options.active&&t.addClass("active"),t}},{key:"setActive",value:function(t){this.options.active=t,t?this.addClass("active"):this.removeClass("active")}},{key:"renderHTML",value:function(){var t={};return this.options.href&&(t.href=this.options.href),this.options.title||(this.options.title=this.options.panel.getTitle()),[D.createElement("a",m({},t,{className:"tabTitle unselectable pointer-cursor csa-tab"}),D.createElement("div",{className:"csa-tab-title"},this.options.title))]}},{key:"onMount",value:function(){var t=this;this.addClickListener(function(){t.dispatch("setActive")})}}]),e}(D.Element),D.TabTitleArea=function(t){function e(t){v(this,e);var i=_(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t));return i.activeTab=null,i}return k(e,t),g(e,[{key:"getDOMAttributes",value:function(){var t=b(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"getDOMAttributes",this).call(this);return t.addClass("nav nav-tabs collapsible-tabs"),t.setAttribute("role","tablist"),t}},{key:"setActiveTab",value:function(t){this.activeTab&&this.activeTab.setActive(!1),this.activeTab=t,this.activeTab.setActive(!0)}},{key:"appendTab",value:function(t){var e=this;this.appendChild(t),t.options.active&&(this.activeTab=t,this.setActiveTab(t)),t.addClickListener(function(){e.setActiveTab(t)})}},{key:"onMount",value:function(){for(var t=0;t<this.options.children.length;t+=1){var e=this.options.children[t];e.options.active&&this.setActiveTab(e)}}}]),e}(D.Element),D.SVGTabTitle=function(t){function e(){return v(this,e),_(this,(e.__proto__||Object.getPrototypeOf(e)).apply(this,arguments))}return k(e,t),g(e,[{key:"setOptions",value:function(t){b(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"setOptions",this).call(this,t),this.options.angle=t.angle||"0",this.options.strokeWidth=t.strokeWidth||"2"}},{key:"getPrimitiveTag",value:function(){return"li"}},{key:"setLabel",value:function(t){this.options.label=t,this.redraw()}},{key:"redraw",value:function(){var t=this;b(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"redraw",this).call(this),setTimeout(function(){var e=parseFloat(t.options.strokeWidth),i=1.4*t.tabTitle.getHeight(),n=Math.tan(t.options.angle/180*Math.PI)*i,o=t.tabTitle.getWidth()+1.2*t.tabTitle.getHeight(),r=i,s=o+2*n,a=s+2*e,l=r+e,u="M "+e+" "+(l+e/2)+" l "+n+" -"+l+" l "+o+" 0 l "+n+" "+l;t.tabSvg.setWidth(a),t.tabSvg.setHeight(l),t.tabPath.setPath(u),t.tabTitle.setStyle("top",r/6+e),t.tabTitle.setStyle("left",n+e+.6*t.tabTitle.getHeight()+"px"),console.log(n),t.setStyle("margin-right",-(n+2*e)),t.setStyle("z-index",100)},0)}},{key:"renderHTML",value:function(){return[D.createElement(D.SVG.SVGRoot,{ref:"tabSvg",style:{width:"0px",height:"0px"}},D.createElement(D.SVG.Path,{ref:"tabPath",d:""})),D.createElement(D.Panel,{ref:"tabTitle",style:{pointerEvents:"none",position:"absolute"}},this.options.label)]}}]),e}(D.Element),D.TabArea=function(t){function e(t){v(this,e);var i=_(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t));return i.tabTitleMap=new WeakMap,i}return k(e,t),g(e,[{key:"getDOMAttributes",value:function(){var t=b(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"getDOMAttributes",this).call(this);return this.options.variableHeightPanels||t.addClass("auto-height-parent"),t}},{key:"createTabPanel",value:function(t){var e=D.createElement(D.BasicTabTitle,{panel:t,active:t.options.active,href:t.options.tabHref}),i=" tab-panel nopad";return this.options.variableHeightPanels||(i+=" auto-height-child"),t.options.className=(t.options.className||"")+i,[e,t]}},{key:"connectTabTitleToPanel",value:function(t,e){this.tabTitleMap.get(t)!==e&&(this.tabTitleMap.set(t,e),this.addTabListeners(e,t))}},{key:"appendChild",value:function(t,e){this.options.children.push(t);var i=this.createTabPanel(t),n=O(i,2),o=n[0],r=n[1];this.titleArea.appendTab(o),this.switcherArea.appendChild(r,e||!0),this.connectTabTitleToPanel(t,o)}},{key:"renderHTML",value:function(){for(var t=[],e=[],i=0;i<this.options.children.length;i+=1){var n=this.options.children[i],o=this.createTabPanel(n),r=O(o,2),s=r[0],a=r[1];t.push(s),e.push(a)}return this.options.variableHeightPanels?this.switcherClass="":this.switcherClass="auto-height",[D.createElement(D.TabTitleArea,{ref:"titleArea"},t),D.createElement(D.Switcher,{ref:"switcherArea",className:this.switcherClass},e)]}},{key:"redraw",value:function(){b(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"redraw",this).call(this);for(var t=0;t<this.options.children.length;t+=1){var i=this.options.children[t],n=this.titleArea.children[t];this.connectTabTitleToPanel(i,n)}}},{key:"getActive",value:function(){return this.switcherArea.getActive()}},{key:"addTabListeners",value:function(t,e){var i=this;this.addListener("resize",function(){e.dispatch("resize")}),e.showTabPanel=function(){i.getActive()!==e&&(i.switcherArea.setActive(e),i.titleArea.setActiveTab(t))},e.addListener("show",function(){e.showTabPanel()}),t.addListener("setActive",function(){e.dispatch("resize"),e.showTabPanel()})}}]),e}(D.Element),D.FloatingWindow=function(t){function e(){return v(this,e),_(this,(e.__proto__||Object.getPrototypeOf(e)).apply(this,arguments))}return k(e,t),g(e,[{key:"getDefaultOptions",value:function(){return{transitionTime:0}}},{key:"setOptions",value:function(t){t=Object.assign(this.getDefaultOptions(),t),b(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"setOptions",this).call(this,t)}},{key:"renderHTML",value:function(){return[this.options.children,this.getStyleElement()]}},{key:"getStyleElement",value:function(){var t={visibility:"hidden",opacity:"0",transition:"visibility 0s "+this.options.transitionTime/1e3+"s,opacity "+this.options.transitionTime/1e3+"s linear"},e={visibility:"visible",opacity:"1",transition:"opacity "+this.options.transitionTime/1e3+"s linear"};return D.createElement(D.StyleElement,null,D.createElement(D.StyleInstance,{selector:".hidden-animated",attributes:t}),D.createElement(D.StyleInstance,{selector:".visible-animated",attributes:e}))}},{key:"getDOMAttributes",value:function(){var t=b(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"getDOMAttributes",this).call(this);return t.setStyle("z-index","2016"),t}},{key:"fadeOut",value:function(){this.removeClass("visible-animated"),this.addClass("hidden-animated")}},{key:"fadeIn",value:function(){this.removeClass("hidden-animated"),this.addClass("visible-animated")}},{key:"show",value:function(){var t=this;this.isInDOM()||(this.parentNode.appendChild(this.node),this.redraw(),setTimeout(function(){t.fadeIn()},0))}},{key:"setParentNode",value:function(t){this.options.parentNode=t}},{key:"hide",value:function(){var t=this;this.isInDOM()&&(this.fadeOut(),setTimeout(function(){t.isInDOM()&&t.parentNode.removeChild(t.node)},this.options.transitionTime))}},{key:"parentNode",get:function(){return this.options.parentNode||(this.parent?this.parent instanceof HTMLElement?this.options.parentNode=this.parent:this.options.parentNode=this.parent.node:this.options.parentNode=document.body),this.options.parentNode}}]),e}(D.Element),D.VolatileFloatingWindow=function(t){function e(){return v(this,e),_(this,(e.__proto__||Object.getPrototypeOf(e)).apply(this,arguments))}return k(e,t),g(e,[{key:"bindWindowListeners",value:function(){var t=this;this.hideListener=this.hideListener||function(){t.hide()},window.addEventListener("click",this.hideListener)}},{key:"unbindWindowListeners",value:function(){window.removeEventListener("click",this.hideListener)}},{key:"show",value:function(){this.isInDOM()||(this.bindWindowListeners(),b(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"show",this).call(this))}},{key:"hide",value:function(){this.isInDOM()&&(this.unbindWindowListeners(),b(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"hide",this).call(this))}},{key:"onMount",value:function(){this.notVisible||this.bindWindowListeners(),this.addClickListener(function(t){t.stopPropagation()})}}]),e}(D.FloatingWindow),D.Modal=function(t){function e(){return v(this,e),_(this,(e.__proto__||Object.getPrototypeOf(e)).apply(this,arguments))}return k(e,t),g(e,[{key:"setOptions",value:function(t){t=Object.assign(this.constructor.getDefaultOptions(),t),b(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"setOptions",this).call(this,t)}},{key:"renderHTML",value:function(){return[D.createElement(D.Panel,{ref:"modalContainer",className:"hidden",style:this.getContainerStyle()},this.getBehindPanel(),this.getModalWindow())]}},{key:"getContainerStyle",value:function(){return{position:"fixed",top:"0px",left:"0px",right:"0px",bottom:"0px",width:"100%",height:"100%",zIndex:"9999"}}},{key:"getBehindPanel",value:function(){return D.createElement(D.Panel,{ref:"behindPanel",className:"hidden-animated",style:this.getBehindPanelStyle()})}},{key:"getBehindPanelStyle",value:function(){return{position:"fixed",width:"100%",height:"100%",background:"rgba(0,0,0,0.5)"}}},{key:"getModalWindow",value:function(){var t=this,e=null;return this.options.closeButton&&(e=D.createElement("div",{style:{position:"absolute",right:"10px",zIndex:"10"}},D.createElement(D.Button,{type:"button",className:"close","data-dismiss":"modal","aria-label":"Close",label:"",onClick:function(){return t.hide()}}))),D.createElement(D.FloatingWindow,{ref:"modalWindow",style:this.getModalWindowStyle()},e,D.createElement("div",{className:"modal-dialog",style:{margin:"0px",height:"100%",width:"100%"}},this.getGivenChildren()))}},{key:"getModalWindowStyle",value:function(){return this.options.fillScreen&&(this.options.width="85%"),{position:"relative",padding:"1%",boxShadow:"0 5px 15px rgba(0,0,0,0.5)",borderRadius:"10px",margin:"60px auto",display:this.options.display||"block",maxHeight:this.options.maxHeight||"85%",left:"0",right:"0",width:this.options.width||"50%",height:this.options.height||"auto",background:"white",overflow:this.options.overflow||"auto"}}},{key:"hide",value:function(){var t=this;this.modalWindow.fadeOut(),setTimeout(function(){t.behindPanel.removeClass("visible-animated"),t.behindPanel.addClass("hidden-animated"),setTimeout(function(){t.modalContainer.addClass("hidden")},t.modalWindow.options.transitionTime)},this.modalWindow.options.transitionTime)}},{key:"show",value:function(){var t=this;this.node||this.mount(document.body),this.modalContainer.removeClass("hidden"),setTimeout(function(){t.behindPanel.addClass("visible-animated"),t.behindPanel.removeClass("hidden-animated"),setTimeout(function(){t.modalWindow.fadeIn()},t.modalWindow.options.transitionTime)},0)}},{key:"onMount",value:function(){var t=this;b(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"onMount",this).call(this),this.behindPanel.addClickListener(function(){t.hide()})}}],[{key:"getDefaultOptions",value:function(){return{closeButton:!0}}}]),e}(D.Element),D.ErrorModal=function(t){function e(){return v(this,e),_(this,(e.__proto__||Object.getPrototypeOf(e)).apply(this,arguments))}return k(e,t),g(e,[{key:"getGivenChildren",value:function(){return[this.getHeader(),this.getBody(),this.getFooter()]}},{key:"getHeader",value:function(){return[D.createElement("div",{className:"modal-header"},D.createElement("h4",{className:"modal-title"},"An Error occurred"))]}},{key:"getBody",value:function(){return D.createElement("div",{className:"modal-body"},this.options.error.message||this.options.error)}},{key:"getFooter",value:function(){var t=this;return D.createElement("div",{className:"modal-footer"},D.createElement(D.Button,{level:D.Level.DANGER,label:"Dismiss",onClick:function(){return t.hide()}}))}}]),e}(D.Modal),D.ActionModal=function(t){function e(){return v(this,e),_(this,(e.__proto__||Object.getPrototypeOf(e)).apply(this,arguments))}return k(e,t),g(e,[{key:"getActionName",value:function(){return this.options.actionName||this.options.label}},{key:"getActionLevel",value:function(){return this.options.level||D.Level.DEFAULT}},{key:"getGivenChildren",value:function(){return[this.getHeader(),this.getBody(),this.getFooter()]}},{key:"getHeader",value:function(){return[D.createElement("div",{className:"modal-header"},D.createElement("h4",{className:"modal-title"},this.getTitle()))]}},{key:"getTitle",value:function(){return this.options.title||this.getActionName()}},{key:"getBody",value:function(){var t=this.getBodyContent();return t?D.createElement("div",{className:"modal-body"},t):null}},{key:"getBodyContent",value:function(){}},{key:"getFooter",value:function(){var t=this.getFooterContent();return t?D.createElement("div",{className:"modal-footer"},t):null}},{key:"getFooterContent",value:function(){var t=this;return[D.createElement(D.TemporaryMessageArea,{ref:"messageArea"}),D.createElement(D.Button,{level:D.Level.DEFAULT,label:"Close",onClick:function(){return t.hide()}}),D.createElement(D.Button,{level:this.getActionLevel(),label:this.getActionName(),onClick:function(){return t.action()}})]}},{key:"action",value:function(){}}]),e}(D.Modal),D.ActionModalButton=function(t){return function(e){function i(){return v(this,i),_(this,(i.__proto__||Object.getPrototypeOf(i)).apply(this,arguments))}return k(i,e),g(i,[{key:"onMount",value:function(){var e=this;this.modal=D.createElement(t,this.options),this.addClickListener(function(){return e.modal.show()})}}]),i}(D.Button)},D.Button=function(t){function e(){return v(this,e),_(this,(e.__proto__||Object.getPrototypeOf(e)).apply(this,arguments))}return k(e,t),g(e,[{key:"getDOMAttributes",value:function(){var t=b(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"getDOMAttributes",this).call(this);return this.getSize()&&t.addClass(this.constructor.bootstrapClass()+"-"+this.getSize()),t}},{key:"setOptions",value:function(t){b(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"setOptions",this).call(this,t),this.options.label=t.label||""}},{key:"getPrimitiveTag",value:function(){return"button"}},{key:"renderHTML",value:function(){return[this.beforeChildren(),this.options.label,this.options.children]}},{key:"getLabel",value:function(){return this.options.label}},{key:"setLabel",value:function(t){this.options.label=t,this.redraw()}},{key:"getSize",value:function(){return this.options.size||""}},{key:"setSize",value:function(t){this.options.size=t,this.redraw()}},{key:"getFaIcon",value:function(){return this.options.faIcon}},{key:"setFaIcon",value:function(t){this.options.faIcon=t,this.redraw()}},{key:"disable",value:function(){this.node.disabled=!0}},{key:"enable",value:function(){this.node.disabled=!1}},{key:"setEnabled",value:function(t){this.node.disabled=!t}},{key:"beforeChildren",value:function(){if(!this.options.faIcon)return null;var t={className:"fa fa-"+this.options.faIcon};return this.options.label&&(t.style={paddingRight:"5px"}),D.createElement("span",t)}}]),e}(p(D.Element,"btn")),D.StateButton=function(t){function e(){return v(this,e),_(this,(e.__proto__||Object.getPrototypeOf(e)).apply(this,arguments))}return k(e,t),g(e,[{key:"setOptions",value:function(t){t.state=this.options.state||t.state||D.ActionStatus.DEFAULT,b(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"setOptions",this).call(this,t),this.options.statusOptions=this.options.statusOptions||[];for(var i=0;i<4;i+=1)if("string"==typeof this.options.statusOptions[i]){var n=this.options.statusOptions[i];this.options.statusOptions[i]={label:n,faIcon:""}}}},{key:"setState",value:function(t){this.options.state=t,t===D.ActionStatus.DEFAULT?this.enable():t===D.ActionStatus.RUNNING?this.disable():t===D.ActionStatus.SUCCESS||t===D.ActionStatus.FAILED,this.redraw()}},{key:"renderHTML",value:function(){var t=this.options.statusOptions[this.options.state-1];return this.options.label=t.label,this.options.faIcon=t.faIcon,b(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"renderHTML",this).call(this)}}]),e}(D.Button),D.AjaxButton=function(t){function e(){return v(this,e),_(this,(e.__proto__||Object.getPrototypeOf(e)).apply(this,arguments))}return k(e,t),g(e,[{key:"ajaxCall",value:function(t){var e=this;this.setState(D.ActionStatus.RUNNING),$.ajax({url:t.url,type:t.type,dataType:t.dataType,data:t.data,success:function(i){t.success(i),i.error?e.setState(D.ActionStatus.FAILED):e.setState(D.ActionStatus.SUCCESS)},error:function(i,n,o){t.error(i,n,o),e.setState(D.ActionStatus.FAILED)},complete:function(){setTimeout(function(){e.setState(D.ActionStatus.DEFAULT)},e.options.onCompete||1e3)}})}}]),e}(D.StateButton),D.RadioButtonGroup=function(t){function e(){return v(this,e),_(this,(e.__proto__||Object.getPrototypeOf(e)).apply(this,arguments))}return k(e,t),g(e,[{key:"renderHTML",value:function(){var t=this;this.buttons=[];for(var e=function(e){var i=function(){t.setIndex(e)};t.buttons.push(D.createElement(D.Button,{key:e,onClick:i,label:t.options.givenOptions[e].toString(),level:t.options.buttonsLevel}))},i=0;i<this.options.givenOptions.length;i+=1)e(i);return this.buttons}},{key:"getIndex",value:function(){return this.index}},{key:"getValue",value:function(){return this.options.givenOptions[this.index]}},{key:"setIndex",value:function(t){this.index=t,this.dispatch("setIndex",{value:this.options.givenOptions[t]})}}]),e}(p(D.Element,"btn-group")),D.BootstrapLabel=function(t){function e(){return v(this,e),_(this,(e.__proto__||Object.getPrototypeOf(e)).apply(this,arguments))}return k(e,t),g(e,[{key:"getPrimitiveTag",value:function(){return"span"}},{key:"getDOMAttributes",value:function(){var t=b(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"getDOMAttributes",this).call(this);return this.options.faIcon&&t.addClass("fa fa-"+this.options.faIcon),t}},{key:"setLabel",value:function(t){this.options.label=t,this.redraw()}},{key:"renderHTML",value:function(){return[this.options.label]}}]),e}(p(D.Element,"label")),D.CardPanel=function(t){function e(){return v(this,e),_(this,(e.__proto__||Object.getPrototypeOf(e)).apply(this,arguments))}return k(e,t),g(e,[{key:"setOptions",value:function(t){b(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"setOptions",this).call(this,t),this.options.level=this.options.level||D.Level.DEFAULT}},{key:"renderHTML",value:function(){return[D.createElement("div",{className:"panel-heading"},this.getTitle()),D.createElement("div",{className:"panel-body",style:this.options.bodyStyle},this.getGivenChildren())]}}]),e}(p(D.Element,"panel")),D.CollapsiblePanel=function(t){function e(t){v(this,e);var i=_(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t));return i.collapsed=null==t.collapsed||t.collapsed,i}return k(e,t),g(e,[{key:"onMount",value:function(){var t=this;this.expandLink.addClickListener(function(){
t.collapsed?t.collapsed=!1:t.collapsed=!0})}},{key:"renderHTML",value:function(){var t="body"+this.uniqueId(),e="",i=" in",n="";return this.options.autoHeight&&(n="auto-height "),this.collapsed&&(e=" collapsed",i=""),[D.createElement("div",{className:"panel-heading",role:"tab"},D.createElement("h4",{className:"panel-title"},D.createElement("a",{ref:"expandLink","data-toggle":"collapse",href:"#"+t,className:"panelCollapseButton"+e,"aria-expanded":"true","aria-controls":t},this.getTitle()))),D.createElement("div",{ref:"contentArea",id:t,className:n+"panel-collapse collapse"+i,role:"tabpanel","aria-expanded":"false"},this.getGivenChildren())]}}]),e}(D.CardPanel),D.DelayedCollapsiblePanel=function(t){function e(){return v(this,e),_(this,(e.__proto__||Object.getPrototypeOf(e)).apply(this,arguments))}return k(e,t),g(e,[{key:"onMount",value:function(){var t=this;this.expandLink.addClickListener(function(){t._haveExpanded||(t._haveExpanded=!0,D.renderingStack.push(t),t.contentArea.options.children=t.getGivenChildren(),D.renderingStack.pop(),t.contentArea.redraw(),t.delayedMount())})}},{key:"getGivenChildren",value:function(){return this._haveExpanded?this.getDelayedChildren():[]}}]),e}(D.CollapsiblePanel),D.ProgressBar=function(t){function e(){return v(this,e),_(this,(e.__proto__||Object.getPrototypeOf(e)).apply(this,arguments))}return k(e,t),g(e,[{key:"renderHTML",value:function(){var t=100*(this.options.value||0),e={className:"progress-bar",role:"progressbar","aria-valuenow":t,"aria-valuemin":0,"aria-valuemax":100,style:{addingBottom:5,width:t+"%",height:this.options.height+"px"}};return this.options.disableTransition&&Object.assign(e.style,{transition:"none","-webkit-transition":"none"}),this.options.level&&(e.className+=" progress-bar-"+this.options.level),this.options.striped&&(e.className+=" progress-bar-striped"),this.options.active&&(e.className+=" active"),this.options.color&&(e.style.backgroundColor=this.options.color),D.createElement("div",e,D.createElement("span",{className:"progress-span"},this.options.label))}},{key:"set",value:function(t){t<0?t=0:t>1&&(t=1),this.options.value=t,this.redraw()}}]),e}(p(D.Element,"progress")),D.BootstrapMixin=p,D.CodeEditor=function(t){function e(){return v(this,e),_(this,(e.__proto__||Object.getPrototypeOf(e)).apply(this,arguments))}return k(e,t),g(e,[{key:"setOptions",value:function(t){b(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"setOptions",this).call(this,t),this.ace&&this.applyAceOptions()}},{key:"applyAceOptions",value:function(){var t=this;this.ace.getSession().setMode("ace/mode/"+(this.options.aceMode||"text"));var e={readOnly:!1,aceTheme:"dawn",fontSize:14,tabSize:4,showLineNumber:!0,showPrintMargin:!1,printMarginSize:80};this.options=Object.assign(e,this.options),this.setAceTheme(this.options.aceTheme),this.setAceFontSize(this.options.fontSize),this.setAceTabSize(this.options.tabSize),this.setAceLineNumberVisible(this.options.showLineNumber),this.setAcePrintMarginVisible(this.options.showPrintMargin),this.setAcePrintMarginSize(this.options.printMarginSize),this.setReadOnly(this.options.readOnly),this.options.numLines&&(this.options.maxLines=this.options.minLines=this.options.numLines),this.options.maxLines&&this.ace.setOptions({maxLines:this.options.maxLines}),this.options.minLines&&this.ace.setOptions({minLines:this.options.minLines}),this.ace.getSession().setUseWrapMode(this.options.lineWrapping||!1),this.options.value&&this.setValue(this.options.value,-1);var i="/static/js/ext/ace/ext-language_tools.js";require([i],function(){t.setBasicAutocompletion(t.options.enableBasicAutocompletion),t.setLiveAutocompletion(t.options.enableLiveAutocompletion),t.setSnippets(t.options.enableSnippets)})}},{key:"redraw",value:function(){return this.ace?void this.ace.resize():void b(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"redraw",this).call(this)}},{key:"onMount",value:function(){var t=this;window.ace||console.error("You need to have the ace library loaded to get this working"),this.ace=ace.edit(this.node),this.ace.$blockScrolling=1/0,this.applyAceOptions(),this.ace.renderer.$textLayer.addEventListener("changeCharacterSize",function(e){t.ace.resize()}),this.addListener("resize",function(){t.ace.resize()}),this.addListener("change",function(){t.ace.resize()})}},{key:"setValue",value:function(t,e){this.apiChange=!e,this.ace.setValue(t,-1),this.apiChange=!1}},{key:"getValue",value:function(){return this.ace.getValue()}},{key:"getAce",value:function(){return this.ace}},{key:"setReadOnly",value:function(t){this.ace.setReadOnly(t)}},{key:"setAceMode",value:function(t){t.hasOwnProperty("aceMode")&&(t=t.aceMode),this.ace.getSession().setMode("ace/mode/"+t)}},{key:"getAceMode",value:function(){return this.ace.getSession().getMode()}},{key:"setAceTheme",value:function(t){t.hasOwnProperty("aceName")&&(t=t.aceName),this.ace.setTheme("ace/theme/"+t)}},{key:"getAceTheme",value:function(){return this.ace.getTheme()}},{key:"setAceFontSize",value:function(t){this.ace.setOptions({fontSize:t+"px"})}},{key:"getAceFontSize",value:function(){return this.ace.getFontSize()}},{key:"setAceTabSize",value:function(t){this.ace.setOptions({tabSize:t})}},{key:"getAceTabSize",value:function(){return this.ace.getOption("tabSize")}},{key:"setAceLineNumberVisible",value:function(t){this.ace.renderer.setShowGutter(t)}},{key:"getAceLineNumberVisible",value:function(){return this.ace.renderer.getShowGutter()}},{key:"setAcePrintMarginVisible",value:function(t){this.ace.setShowPrintMargin(t)}},{key:"getAcePrintMarginVisible",value:function(){return this.ace.getShowPrintMargin()}},{key:"setAcePrintMarginSize",value:function(t){this.ace.setPrintMarginColumn(t)}},{key:"getAcePrintMarginSize",value:function(){return this.ace.getPrintMarginColumn()}},{key:"setBasicAutocompletion",value:function(t){this.ace.setOptions({enableBasicAutocompletion:t})}},{key:"setLiveAutocompletion",value:function(t){this.ace.setOptions({enableLiveAutocompletion:t})}},{key:"setSnippets",value:function(t){this.ace.setOptions({enableSnippets:t})}},{key:"insert",value:function(t){this.ace.insert(t)}},{key:"append",value:function(t){var e=this.ace.getSession().getLength()-1;e<0&&(e=0);var i=this.ace.getSession().getLine(e).length,n=this.ace.isRowFullyVisible(e);this.ace.getSession().insert({row:e,column:i},t),this.ace.resize(),n&&this.ace.scrollToLine(this.ace.getSession().getLength()-1,!0,!0,function(){})}}]),e}(D.Element),D.StaticCodeHighlighter=function(t){function e(){return v(this,e),_(this,(e.__proto__||Object.getPrototypeOf(e)).apply(this,arguments))}return k(e,t),g(e,[{key:"onMount",value:function(){b(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"onMount",this).call(this),this.ace.setFontSize(this.options.fontSize||this.getData("font-size",13)),this.setReadOnly(!0),this.ace.getSession().setUseWrapMode(!0)}}]),e}(D.CodeEditor);var Q=function(t){function e(){v(this,e);var t=_(this,(e.__proto__||Object.getPrototypeOf(e)).call(this));return t.stores=new Map,t.applyEventWrapper=function(e){t.applyEvent(e)},t}return k(e,t),g(e,[{key:"getStore",value:function(t){return t=t.toLowerCase(),this.stores.get(t)}},{key:"addStore",value:function(t){var e=t.objectType.toLowerCase();if(this.stores.has(e))throw Error("GlobalState: Adding a store for an existing object type: "+t.objectType);this.stores.set(e,t)}},{key:"applyEvent",value:function(t){if(!Array.isArray(t)){if(!t.hasOwnProperty("objectType"))return void console.error("GlobalState: Event does not contain 'objectType' property: ",t);var e=this.getStore(t.objectType);return e?e.applyEvent(t):void console.log("GlobalState: Missing store for event: ",t)}var i=!0,n=!1,o=void 0;try{for(var r,s=t[Symbol.iterator]();!(i=(r=s.next()).done);i=!0){var a=r.value;this.applyEvent(a)}}catch(t){n=!0,o=t}finally{try{!i&&s.return&&s.return()}finally{if(n)throw o}}}},{key:"get",value:function(t,e){var i=this.getStore(t);if(i){var n=Array.prototype.slice.call(arguments,1);return i.get.apply(i,T(n))}return console.error("GlobalState: Can't find store ",t),null}},{key:"importStateFromTempMap",value:function(t,e){var i=e.get(t);e.delete(t);var n=this.getStore(t);if(!n)return void console.error("Failed to import state, can't find store ",t);var o=!0,r=!1,s=void 0;try{for(var a,l=n.getDependencies()[Symbol.iterator]();!(o=(a=l.next()).done);o=!0){var u=a.value;this.importStateFromTempMap(u.toLowerCase(),e)}}catch(t){r=!0,s=t}finally{try{!o&&l.return&&l.return()}finally{if(r)throw s}}n.importState(i)}},{key:"importState",value:function(t){var e=new Map;for(var i in t)e.set(i.toLowerCase(),t[i]);for(;e.size>0;){var n=e.keys(),o=n.next().value;this.importStateFromTempMap(o,e)}}}]),e}(C),tt=new Q;window&&(window.GlobalState=tt);var et=function(t){function e(t){v(this,e);var i=_(this,(e.__proto__||Object.getPrototypeOf(e)).call(this));return Object.assign(i,t),i}return k(e,t),g(e,[{key:"update",value:function(t){Object.assign(this,t.data)}},{key:"addUpdateListener",value:function(t){return this.addListener("update",t)}},{key:"addDeleteListener",value:function(t){return this.addListener("delete",t)}},{key:"addEventListener",value:function(t,e){var i=this;if(Array.isArray(t)){var n=new A,o=!0,r=!1,s=void 0;try{for(var a,l=t[Symbol.iterator]();!(o=(a=l.next()).done);o=!0){var u=a.value;n.add(this.addEventListener(u,e))}}catch(t){r=!0,s=t}finally{try{!o&&l.return&&l.return()}finally{if(r)throw s}}return n}return this._eventDispatcher||(this._eventDispatcher=new C,this.addUpdateListener(function(t){i._eventDispatcher.dispatch(t.type,t,i)})),this._eventDispatcher.addListener(t,e)}}]),e}(C),it=function(t){function e(t){var i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:et,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};v(this,e);var o=_(this,(e.__proto__||Object.getPrototypeOf(e)).call(this));return o.options=n,o.objectType=t.toLowerCase(),o.ObjectWrapper=i,o.attachToState(),o}return k(e,t),g(e,[{key:"attachToState",value:function(){this.getState()&&this.getState().addStore(this)}},{key:"getState",value:function(){return this.options.hasOwnProperty("state")?this.options.state:GlobalState}},{key:"getDependencies",value:function(){return this.options.dependencies||[]}}]),e}(C),nt=function(t){function e(t){arguments.length>1&&void 0!==arguments[1]?arguments[1]:et,arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};v(this,e);var i=_(this,(e.__proto__||Object.getPrototypeOf(e)).apply(this,arguments));return i.objects=new Map,i}return k(e,t),g(e,[{key:"has",value:function(t){return!!this.get(t)}},{key:"get",value:function(t){return t?this.objects.get(parseInt(t)):null}},{key:"all",value:function(t){var e=this.objects.values();return t||(e=Array.from(e)),e}},{key:"createObject",value:function(t){return new this.ObjectWrapper(t.data,t)}},{key:"applyCreateEvent",value:function(t){var e=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],i=this.get(t.objectId);if(i){var n=Object.assign({},t);return n.type="refresh",i.update(n),i.dispatch("update",t),i}var o=this.createObject(t);return this.objects.set(t.objectId,o),e&&this.dispatch("create",o,t),o}},{key:"applyUpdateOrCreateEvent",value:function(t){var e=this.get(t.objectId);return e?this.applyEventToObject(e,t):(e=this.applyCreateEvent(t,!1),this.dispatch("create",e,t)),this.dispatch("updateOrCreate",e,t),e}},{key:"applyDeleteEvent",value:function(t){var e=this.objects.get(t.objectId);return e&&(this.objects.delete(t.objectId),e.dispatch("delete",t,e),this.dispatch("delete",e,t)),e}},{key:"applyEventToObject",value:function(t,e){return t.update(e),t.dispatch("update",e),this.dispatch("update",t,e),t}},{key:"applyEvent",value:function(t){if("create"===t.type)return this.applyCreateEvent(t);if("delete"===t.type)return this.applyDeleteEvent(t);if("updateOrCreate"===t.type)return this.applyUpdateOrCreateEvent(t);var e=this.get(t.objectId);return e?this.applyEventToObject(e,t):void console.error("I don't have object of type ",this.objectType," ",t.objectId)}},{key:"importState",value:function(t){t=t||[];var e=!0,i=!1,n=void 0;try{for(var o,r=t[Symbol.iterator]();!(e=(o=r.next()).done);e=!0){var s=o.value;this.fakeCreate(s)}}catch(t){i=!0,n=t}finally{try{!e&&r.return&&r.return()}finally{if(i)throw n}}}},{key:"fakeCreate",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"fakeCreate";if(t){var i={objectType:this.objectType,objectId:t.id,type:e,data:t};return this.applyCreateEvent(i)}}},{key:"addCreateListener",value:function(t,e){if(e){var i=!0,n=!1,o=void 0;try{for(var r,s=this.objects.values()[Symbol.iterator]();!(i=(r=s.next()).done);i=!0){var a=r.value,l={objectType:this.objectType,objectId:a.id,type:"fakeCreate",data:a};t(a,l)}}catch(t){n=!0,o=t}finally{try{!i&&s.return&&s.return()}finally{if(n)throw o}}}return this.addListener("create",t)}},{key:"addUpdateListener",value:function(t){return this.addListener("update",t)}},{key:"addDeleteListener",value:function(t){return this.addListener("delete",t)}}]),e}(it),ot=function(t){function e(t){var i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return v(this,e),_(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t,e,i))}return k(e,t),g(e,[{key:"get",value:function(){return this}},{key:"all",value:function(){return[this]}},{key:"applyEvent",value:function(t){this.update(t),this.dispatch("update",t,this)}},{key:"importState",value:function(t){Object.assign(this,t),this.dispatch("update",event,this)}},{key:"addUpdateListener",value:function(t){return this.addListener("update",t)}}]),e}(it);ot.prototype.addEventListener=et.prototype.addEventListener;var rt={};rt.rawRequest=function(t){return $.ajax(t)},rt.request=function(t){return t=Object.assign({csrfmiddlewaretoken:CSRF_TOKEN,dataType:"json"},t),rt.rawRequest(t)},rt.post=function(t){return t=Object.assign({type:"POST"},t),rt.request(t)},rt.get=function(t){return t=Object.assign({type:"GET"},t),rt.request(t)};var st=function(t){return function(t){function e(){return v(this,e),_(this,(e.__proto__||Object.getPrototypeOf(e)).apply(this,arguments))}return k(e,t),g(e,[{key:"attachListener",value:function(t,e,i){this.addCleanupTask(t.addListener(e,i))}},{key:"attachUpdateListener",value:function(t,e){this.addCleanupTask(t.addUpdateListener(e))}},{key:"attachCreateListener",value:function(t,e){this.addCleanupTask(t.addCreateListener(e))}},{key:"attachDeleteListener",value:function(t,e){this.addCleanupTask(t.addDeleteListener(e))}},{key:"attachEventListener",value:function(t,e,i){this.addCleanupTask(t.addEventListener(e,i))}}]),e}(t)},at=function(t){function e(t){v(this,e);var i=_(this,(e.__proto__||Object.getPrototypeOf(e)).call(this));return i.linkToParent(t),i}return k(e,t),g(e,[{key:"linkToParent",value:function(t){this.parent=t}},{key:"name",value:function(){return this.constructor.pluginName()}}],[{key:"pluginName",value:function(){return this.name}}]),e}(C),lt=function(t){return function(t){function e(){return v(this,e),_(this,(e.__proto__||Object.getPrototypeOf(e)).apply(this,arguments))}return k(e,t),g(e,[{key:"registerPlugin",value:function(t){this.hasOwnProperty("plugins")||(this.plugins=new Map);var e=new t(this),i=e.name();this.plugins.has(i)&&console.error("You are overwriting an existing plugin: ",i," for object ",this),this.plugins.set(i,e)}},{key:"removePlugin",value:function(t){var e=this.getPlugin(t);e?(e.remove(this),this.plugins.delete(e.name())):console.error("Can't remove plugin ",t)}},{key:"getPlugin",value:function(t){return"string"!=typeof t&&(t=t.pluginName()),this.plugins?this.plugins.get(t):null}}]),e}(t)},ut=function(t){function i(){v(this,i);var t=_(this,(i.__proto__||Object.getPrototypeOf(i)).call(this));return window.onhashchange=function(){t.routeCallback()},t}return k(i,t),g(i,[{key:"routeCallback",value:function(){var t=this.getLocation();t&&this.dispatch("route",t)}},{key:"addRouteListener",value:function(t){return this.addListener("route",t)}},{key:"removeRouteListener",value:function(t){this.removeListener("route",t)}},{key:"route",value:function(){var t=Array.from(arguments);t=e(t);var i="#"+t.join("/");i!==window.location.hash&&(history.pushState({},"",i),this.routeCallback())}},{key:"routeNewTab",value:function(){var t=Array.from(arguments);t=e(t);var i=window.location.origin+window.location.pathname+"#"+t.join("/");window.open(i,"_blank")}},{key:"getLocation",value:function(){var t=window.location.hash;if(0===t.length)return{location:t,args:[]};if(/^#(?:[\w+-]\/?)+$/.test(t)){var e=t.slice(1).split("/");return 0===e[e.length-1].length&&e.pop(),{location:t,args:e}}return console.log("Invalid hash route ",t),null}}]),i}(C),ht=new ut,ct=function(){function t(){v(this,t),this._values=new Array(8),this._length=0,this._offset=this._values.length/2|0}return g(t,[{key:"shouldShrink",value:function(){return this._values.length>4*this._length+8}},{key:"maybeShrink",value:function(){this.shouldShrink()&&this.rebalance(!0)}},{key:"rebalance",value:function(t){var e=this._values.length,i=this._length,n=1.618*i+8|0,o=t||e<n;if(o){for(var r=new Array(n),s=n/2-i/2|0,a=0;a<i;a+=1)r[s+a]=this._values[this._offset+a];this._values=r,this._offset=s}else{var l=e/2-i/2|0;if(l<this._offset)for(var u=0;u<i;u+=1)this._values[u+l]=this._values[u+this._offset];else for(var h=i-1;h>=0;h-=1)this._values[h+l]=this._values[h+this._offset];this._offset=l}}},{key:"pushBack",value:function(t){0==this._offset&&this.rebalance(),this._values[--this._offset]=t,this._length+=1}},{key:"popBack",value:function(){var t=this.peekBack();return this._values[this._offset++]=void 0,this._length-=1,this.maybeShrink(),t}},{key:"peekBack",value:function(){if(0==this._length)throw Error("Invalid operation, empty deque");return this._values[this._offset]}},{key:"pushFront",value:function(t){this._offset+this._length===this._values.length&&this.rebalance(),this._values[this._offset+this._length]=t,this._length+=1}},{key:"popFront",value:function(){var t=this.peekFront();return this._length-=1,this._values[this._offset+this._length]=void 0,this.maybeShrink(),t}},{key:"peekFront",value:function(){if(0==this._length)throw Error("Invalid operation, empty deque");return this._values[this._offset+this._length-1]}},{key:"get",value:function(t){if(t<0||t>=this._length)throw Error("Invalid index",t);return this._values[this._offset+t]}},{key:"toArray",value:function(){return this._values.slice(this._offset,this._offset+this._length)}},{key:"toString",value:function(){return this.toArray().toString()}},{key:"length",get:function(){return this._values.length},set:function(t){throw Error("Can't resize a deque")}}]),t}();ct.prototype.pop=ct.prototype.popBack,ct.prototype.push=ct.prototype.pushBack,ct.prototype.shift=ct.prototype.popFront,ct.prototype.unshift=ct.prototype.pushFront,t.UIElement=j,t.UI=D,t.css=h,t.StyleSet=F,t.ExclusiveClassSet=N,t.styleMap=V,t.wrapCSS=s,t.hover=a,t.focus=u,t.active=l,t.StateClass=Q,t.GlobalState=tt,t.StoreObject=et,t.BaseStore=it,t.GenericObjectStore=nt,t.SingletonStore=ot,t.AjaxFetchMixin=d,t.VirtualStoreMixin=y,t.VirtualStoreObjectMixin=f,t.StateSubscribableMixin=st,t.Dispatcher=w,t.Dispatchable=C,t.RunOnce=E,t.CleanupJobs=A,t.CleanupMixin=P,t.Ajax=rt,t.Plugin=at,t.Pluginable=lt,t.unwrapArray=e,t.splitInChunks=i,t.isIterable=n,t.defaultComparator=o,t.URLRouter=ht,t.Deque=ct,Object.defineProperty(t,"__esModule",{value:!0})});
